(function webpackUniversalModuleDefinition(root, factory) {
	if(typeof exports === 'object' && typeof module === 'object')
		module.exports = factory();
	else if(typeof define === 'function' && define.amd)
		define([], factory);
	else if(typeof exports === 'object')
		exports["okinawa"] = factory();
	else
		root["okinawa"] = factory();
})(window, function() {
return /******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./src/okinawa.js");
/******/ })
/************************************************************************/
/******/ ({

/***/ "./lib/font.js/Font.js":
/*!*****************************!*\
  !*** ./lib/font.js/Font.js ***!
  \*****************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\n/**\n\n  Font.js v2012.01.25\n  (c) Mike \"Pomax\" Kamermans, 2012\n  Licensed under MIT (\"expat\" flavour) license.\n  Hosted on http://github.com/Pomax/Font.js\n\n  This library adds Font objects to the general pool\n  of available JavaScript objects, so that you can load\n  fonts through a JavaScript object similar to loading\n  images through a new Image() object.\n\n  Font.js is compatible with all browsers that support\n  <canvas> and Object.defineProperty - This includes\n  all versions of Firefox, Chrome, Opera, IE and Safari\n  that were 'current' (Firefox 9, Chrome 16, Opera 11.6,\n  IE9, Safari 5.1) at the time Font.js was released.\n\n  Font.js will not work on IE8 or below due to the lack\n  of Object.defineProperty - I recommend using the\n  solution outlined in http://ie6update.com/ for websites\n  that are not corporate intranet sites, because as a home\n  user you have no excuse not to have upgraded to Internet\n  Explorer 9 yet, or simply not using Internet Explorer if\n  you're still using Windows XP. If you have friends or\n  family that still use IE8 or below: intervene.\n\n  You may remove every line in this header except for\n  the first block of four lines, for the purposes of\n  saving space and minification. If minification strips\n  the header, you'll have to paste that paragraph back in.\n\n  Issue tracker: https://github.com/Pomax/Font.js/issues\n\n**/\n// (function(window){\n// 1) Do we have a mechanism for binding implicit get/set?\nif (!Object.defineProperty) {\n  throw 'Font.js requires Object.defineProperty, which this browser does not support.';\n} // 2) Do we have Canvas2D available?\n\n\nif (!document.createElement('canvas').getContext) {\n  throw 'Font.js requires <canvas> and the Canvas2D API, which this browser does not support.';\n} // Make sure type arrays are available in IE9\n// Code borrowed from pdf.js (https://gist.github.com/1057924)\n\n\n(function (window) {\n  try {\n    var a = new Uint8Array(1);\n    return;\n  } catch (e) {}\n\n  function subarray(start, end) {\n    return this.slice(start, end);\n  }\n\n  function set_(array, offset) {\n    var i,\n        n = array.length;\n\n    if (arguments.length < 2) {\n      offset = 0;\n    }\n\n    for (i = 0; i < n; ++i, ++offset) {\n      this[offset] = array[i] & 0xff;\n    }\n  }\n\n  function TypedArray(arg1) {\n    var result, i;\n\n    if (typeof arg1 === 'number') {\n      result = new Array(arg1);\n\n      for (i = 0; i < arg1; ++i) {\n        result[i] = 0;\n      }\n    } else {\n      result = arg1.slice(0);\n    }\n\n    result.subarray = subarray;\n    result.buffer = result;\n    result.byteLength = result.length;\n    result.set = set_;\n\n    if (_typeof(arg1) === 'object' && arg1.buffer) {\n      result.buffer = arg1.buffer;\n    }\n\n    return result;\n  }\n\n  window.Uint8Array = TypedArray;\n  window.Uint32Array = TypedArray;\n  window.Int32Array = TypedArray;\n})(window); // Also make sure XHR understands typing.\n// Code based on pdf.js (https://gist.github.com/1057924)\n\n\n(function (window) {\n  // shortcut for Opera - it's already fine\n  if (window.opera) return; // shortcuts for browsers that already implement XHR minetyping\n\n  if ('response' in XMLHttpRequest.prototype || 'mozResponseArrayBuffer' in XMLHttpRequest.prototype || 'mozResponse' in XMLHttpRequest.prototype || 'responseArrayBuffer' in XMLHttpRequest.prototype) {\n    return;\n  }\n\n  var getter; // If we have access to the VBArray (i.e., we're in IE), use that\n\n  if (window.VBArray) {\n    getter = function getter() {\n      return new Uint8Array(new VBArray(this.responseBody).toArray());\n    };\n  } // Okay... umm.. untyped arrays? This may break completely.\n  // (Android browser 2.3 and 3 don't do typed arrays)\n  else {\n      getter = function getter() {\n        this.responseBody;\n      };\n    }\n\n  Object.defineProperty(XMLHttpRequest.prototype, 'response', {\n    get: getter\n  });\n})(window); // IE9 does not have binary-to-ascii built in O_O\n\n\nif (!window.btoa) {\n  // Code borrowed from PHP.js (http://phpjs.org/functions/base64_encode:358)\n  window.btoa = function (data) {\n    var b64 = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';\n    var o1,\n        o2,\n        o3,\n        h1,\n        h2,\n        h3,\n        h4,\n        bits,\n        i = 0,\n        ac = 0,\n        enc = '',\n        tmp_arr = [];\n\n    if (!data) {\n      return data;\n    }\n\n    do {\n      // pack three octets into four hexets\n      o1 = data.charCodeAt(i++);\n      o2 = data.charCodeAt(i++);\n      o3 = data.charCodeAt(i++);\n      bits = o1 << 16 | o2 << 8 | o3;\n      h1 = bits >> 18 & 0x3f;\n      h2 = bits >> 12 & 0x3f;\n      h3 = bits >> 6 & 0x3f;\n      h4 = bits & 0x3f; // use hexets to index into b64, and append result to encoded string\n\n      tmp_arr[ac++] = b64.charAt(h1) + b64.charAt(h2) + b64.charAt(h3) + b64.charAt(h4);\n    } while (i < data.length);\n\n    enc = tmp_arr.join('');\n    var r = data.length % 3;\n    return (r ? enc.slice(0, r - 3) : enc) + '==='.slice(r || 3);\n  };\n}\n/**\n\n    Not-borrowed-code starts here!\n\n   **/\n\n\nfunction Font() {\n  // if this is not specified, a random name is used\n  this.fontFamily = 'fjs' + (999999 * Math.random() | 0);\n} // the font resource URL\n\n\nFont.prototype.url = ''; // the font's format ('truetype' for TT-OTF or 'opentype' for CFF-OTF)\n\nFont.prototype.format = ''; // the font's byte code\n\nFont.prototype.data = ''; // custom font, implementing the letter 'A' as zero-width letter.\n\nFont.prototype.base64 = 'AAEAAAAKAIAAAwAgT1MvMgAAAAAAAACsAAAAWGNtYXAA' + 'AAAAAAABBAAAACxnbHlmAAAAAAAAATAAAAAQaGVhZAAAA' + 'AAAAAFAAAAAOGhoZWEAAAAAAAABeAAAACRobXR4AAAAAA' + 'AAAZwAAAAIbG9jYQAAAAAAAAGkAAAACG1heHAAAAAAAAA' + 'BrAAAACBuYW1lAAAAAAAAAcwAAAAgcG9zdAAAAAAAAAHs' + 'AAAAEAAEAAEAZAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAA' + 'AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA' + 'AAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAABAAMAAQA' + 'AAAwABAAgAAAABAAEAAEAAABB//8AAABB////wAABAAAA' + 'AAABAAAAAAAAAAAAAAAAMQAAAQAAAAAAAAAAAABfDzz1A' + 'AAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAEAAg' + 'AAAAAAAAABAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAA' + 'AAAAAAAAAAQAAAAAAAAAAAAAAAAAIAAAAAQAAAAIAAQAB' + 'AAAAAAACAAAAAAAAAAAAAAAAAAAAAAAAAAIAHgADAAEEC' + 'QABAAAAAAADAAEECQACAAIAAAAAAAEAAAAAAAAAAAAAAA' + 'AAAA=='; // these metrics represent the font-indicated values,\n// not the values pertaining to text as it is rendered\n// on the page (use fontmetrics.js for this instead).\n\nFont.prototype.metrics = {\n  quadsize: 0,\n  leading: 0,\n  ascent: 0,\n  descent: 0,\n  weightclass: 400\n}; // Will this be a remote font, or a system font?\n\nFont.prototype.systemfont = false; // internal indicator that the font is done loading\n\nFont.prototype.loaded = false;\n/**\n * This function gets called once the font is done\n * loading, its metrics have been determined, and it\n * has been parsed for use on-page. By default, this\n * function does nothing, and users can bind their\n * own handler function.\n */\n\nFont.prototype.onload = function () {};\n/**\n * This function gets called when there is a problem\n * loading the font.\n */\n\n\nFont.prototype.onerror = function () {}; // preassigned quad × quad context, for measurements\n\n\nFont.prototype.canvas = false;\nFont.prototype.context = false;\n/**\n * validation function to see if the zero-width styled\n * text is no longer zero-width. If this is true, the\n * font is properly done loading. If this is false, the\n * function calls itself via a timeout\n */\n\nFont.prototype.validate = function (target, zero, mark, font, timeout) {\n  if (timeout !== false && timeout < 0) {\n    this.onerror(\"Requested system font '\" + this.fontFamily + \"' could not be loaded (it may not be installed).\");\n    return;\n  }\n\n  var width = getComputedStyle(target, null).getPropertyValue('width').replace('px', ''); // font has finished loading - remove the zero-width and\n  // validation paragraph, but leave the actual font stylesheet (mark);\n\n  if (width > 0) {\n    document.head.removeChild(zero);\n    document.body.removeChild(target);\n    this.loaded = true;\n    this.onload();\n  } // font has not finished loading - wait 50ms and try again\n  else {\n      console.log('timing out');\n      setTimeout(function () {\n        font.validate(target, zero, mark, font, timeout === false ? false : timeout - 50);\n      }, 1000);\n    }\n};\n/**\n * This gets called when the file is done downloading.\n */\n\n\nFont.prototype.ondownloaded = function () {\n  var instance = this; // decimal to character\n\n  var chr = function chr(val) {\n    return String.fromCharCode(val);\n  }; // decimal to ushort\n\n\n  var chr16 = function chr16(val) {\n    if (val < 256) {\n      return chr(0) + chr(val);\n    }\n\n    var b1 = val >> 8;\n    var b2 = val & 0xff;\n    return chr(b1) + chr(b2);\n  }; // decimal to hexadecimal\n  // See http://phpjs.org/functions/dechex:382\n\n\n  var dechex = function dechex(val) {\n    if (val < 0) {\n      val = 0xffffffff + val + 1;\n    }\n\n    return parseInt(val, 10).toString(16);\n  }; // unsigned short to decimal\n\n\n  var ushort = function ushort(b1, b2) {\n    return 256 * b1 + b2;\n  }; // signed short to decimal\n\n\n  var fword = function fword(b1, b2) {\n    var negative = b1 >> 7 === 1,\n        val;\n    b1 = b1 & 0x7f;\n    val = 256 * b1 + b2; // positive numbers are already done\n\n    if (!negative) {\n      return val;\n    } // negative numbers need the two's complement treatment\n\n\n    return val - 0x8000;\n  }; // unsigned long to decimal\n\n\n  var ulong = function ulong(b1, b2, b3, b4) {\n    return 16777216 * b1 + 65536 * b2 + 256 * b3 + b4;\n  }; // unified error handling\n\n\n  var error = function error(msg) {\n    instance.onerror(msg);\n  }; // we know about TTF (0x00010000) and CFF ('OTTO') fonts\n\n\n  var ttf = chr(0) + chr(1) + chr(0) + chr(0);\n  var cff = 'OTTO'; // so what kind of font is this?\n\n  var data = this.data;\n  var version = chr(data[0]) + chr(data[1]) + chr(data[2]) + chr(data[3]);\n  var isTTF = version === ttf;\n  var isCFF = isTTF ? false : version === cff;\n\n  if (isTTF) {\n    this.format = 'truetype';\n  } else if (isCFF) {\n    this.format = 'opentype';\n  } // terminal error: stop running code\n  else {\n      error('Error: file at ' + this.url + ' cannot be interpreted as OpenType font.');\n      return;\n    } // ================================================================\n  // if we get here, this is a legal font. Extract some font metrics,\n  // and then wait for the font to be available for on-page styling.\n  // ================================================================\n  // first, we parse the SFNT header data\n\n\n  var numTables = ushort(data[4], data[5]),\n      tagStart = 12,\n      ptr,\n      end = tagStart + 16 * numTables,\n      tags = {},\n      tag;\n\n  for (ptr = tagStart; ptr < end; ptr += 16) {\n    tag = chr(data[ptr]) + chr(data[ptr + 1]) + chr(data[ptr + 2]) + chr(data[ptr + 3]);\n    tags[tag] = {\n      name: tag,\n      checksum: ulong(data[ptr + 4], data[ptr + 5], data[ptr + 6], data[ptr + 7]),\n      offset: ulong(data[ptr + 8], data[ptr + 9], data[ptr + 10], data[ptr + 11]),\n      length: ulong(data[ptr + 12], data[ptr + 13], data[ptr + 14], data[ptr + 15])\n    };\n  } // first we define a quick error shortcut function:\n\n\n  var checkTableError = function checkTableError(tag) {\n    if (!tags[tag]) {\n      error(\"Error: font is missing the required OpenType '\" + tag + \"' table.\"); // return false, so that the result of this function can be used to stop running code\n\n      return false;\n    }\n\n    return tag;\n  }; // Then we access the HEAD table for the \"font units per EM\" value.\n\n\n  tag = checkTableError('head');\n\n  if (tag === false) {\n    return;\n  }\n\n  ptr = tags[tag].offset;\n  tags[tag].version = '' + data[ptr] + data[ptr + 1] + data[ptr + 2] + data[ptr + 3];\n  var unitsPerEm = ushort(data[ptr + 18], data[ptr + 19]);\n  this.metrics.quadsize = unitsPerEm; // We follow up by checking the HHEA table for ascent, descent, and leading values.\n\n  tag = checkTableError('hhea');\n\n  if (tag === false) {\n    return;\n  }\n\n  ptr = tags[tag].offset;\n  tags[tag].version = '' + data[ptr] + data[ptr + 1] + data[ptr + 2] + data[ptr + 3];\n  this.metrics.ascent = fword(data[ptr + 4], data[ptr + 5]) / unitsPerEm;\n  this.metrics.descent = fword(data[ptr + 6], data[ptr + 7]) / unitsPerEm;\n  this.metrics.leading = fword(data[ptr + 8], data[ptr + 9]) / unitsPerEm; // And then finally we check the OS/2 table for the font-indicated weight class.\n\n  tag = checkTableError('OS/2');\n\n  if (tag === false) {\n    return;\n  }\n\n  ptr = tags[tag].offset;\n  tags[tag].version = '' + data[ptr] + data[ptr + 1];\n  this.metrics.weightclass = ushort(data[ptr + 4], data[ptr + 5]); // ==================================================================\n  // Then the mechanism for determining whether the font is not\n  // just done downloading, but also fully parsed and ready for\n  // use on the page for typesetting: we pick a letter that we know\n  // is supported by the font, and generate a font that implements\n  // only that letter, as a zero-width glyph. We can then test\n  // whether the font is available by checking whether a paragraph\n  // consisting of just that letter, styled with \"desiredfont, zwfont\"\n  // has zero width, or a real width. As long as it's zero width, the\n  // font has not finished loading yet.\n  // ==================================================================\n  // To find a letter, we must consult the character map (\"cmap\") table\n\n  tag = checkTableError('cmap');\n\n  if (tag === false) {\n    return;\n  }\n\n  ptr = tags[tag].offset;\n  tags[tag].version = '' + data[ptr] + data[ptr + 1];\n  numTables = ushort(data[ptr + 2], data[ptr + 3]); // For the moment, we only look for windows/unicode records, with\n  // a cmap subtable format 4 because OTS (the sanitiser used in\n  // Chrome and Firefox) does not actually support anything else\n  // at the moment.\n  //\n  // When http://code.google.com/p/chromium/issues/detail?id=110175\n  // is resolved, remember to stab me to add support for the other\n  // maps, too.\n  //\n\n  var encodingRecord,\n      rptr,\n      platformID,\n      encodingID,\n      offset,\n      cmap314 = false;\n\n  for (var encodingRecord = 0; encodingRecord < numTables; encodingRecord++) {\n    rptr = ptr + 4 + encodingRecord * 8;\n    platformID = ushort(data[rptr], data[rptr + 1]);\n    encodingID = ushort(data[rptr + 2], data[rptr + 3]);\n    offset = ulong(data[rptr + 4], data[rptr + 5], data[rptr + 6], data[rptr + 7]);\n\n    if (platformID === 3 && encodingID === 1) {\n      cmap314 = offset;\n    }\n  } // This is our fallback font - a minimal font that implements\n  // the letter \"A\". We can transform this font to implementing\n  // any character between 0x0000 and 0xFFFF by altering a\n  // handful of letters.\n\n\n  var printChar = 'A'; // Now, if we found a format 4 {windows/unicode} cmap subtable,\n  // we can find a suitable glyph and modify the 'base64' content.\n\n  if (cmap314 !== false) {\n    ptr += cmap314;\n    version = ushort(data[ptr], data[ptr + 1]);\n\n    if (version === 4) {\n      // First find the number of segments in this map\n      var segCount = ushort(data[ptr + 6], data[ptr + 7]) / 2; // Then, find the segment end characters. We'll use\n      // whichever of those isn't a whitespace character\n      // for our verification font, which we check based\n      // on the list of Unicode 6.0 whitespace code points:\n\n      var printable = function printable(chr) {\n        return [// ascii range:\n        0x0009, 0x000a, 0x000b, 0x000c, 0x000d, 0x0020, // ansi range:\n        0x007f, 0x0080, 0x0081, 0x008d, 0x008e, 0x008f, 0x0090, 0x0095, 0x009d, 0x009e, 0x00a0, // general punctuation :\n        0x2000, 0x2001, 0x2002, 0x2003, 0x2004, 0x2005, 0x2006, 0x2007, 0x2008, 0x2009, 0x200a, 0x200b, 0x200c, 0x200d, 0x200e, 0x200f, 0x2028, 0x2029, 0x202a, 0x202b, 0x202b, 0x202c, 0x202d, 0x202e, 0x202f, 0x205f, 0x2060, 0x2061, 0x2062, 0x2063, 0x2064, 0x3000].indexOf(chr) === -1;\n      }; // Loop through the segments in search of a usable character code:\n\n\n      var i = ptr + 14,\n          e = ptr + 14 + 2 * segCount,\n          endChar = false;\n\n      for (; i < e; i += 2) {\n        endChar = ushort(data[i], data[i + 1]);\n\n        if (printable(endChar)) {\n          break;\n        }\n\n        endChar = false;\n      }\n\n      if (endChar != false) {\n        // We now have a printable character to validate with!\n        // We need to make sure to encode the correct \"idDelta\"\n        // value for this character, because our \"glyph\" will\n        // always be at index 1 (index 0 is reserved for .notdef).\n        // As such, we need to set up a delta value such that:\n        //\n        //   [character code] + [delta value] == 1\n        //\n        printChar = String.fromCharCode(endChar);\n        var delta = (-(endChar - 1) + 65536) % 65536; // Now we need to substitute the values in our\n        // base64 font template. The CMAP modification\n        // consists of generating a new base64 string\n        // for the bit that indicates the encoded char.\n        // In our 'A'-encoding font, this is:\n        //\n        //   0x00 0x41 0xFF 0xFF 0x00 0x00\n        //   0x00 0x41 0xFF 0xFF 0xFF 0xC0\n        //\n        // which is the 20 letter base64 string at [380]:\n        //\n        //   AABB//8AAABB////wAAB\n        //\n        // We replace this with our new character:\n        //\n        //   [hexchar] 0xFF 0xFF 0x00 0x00\n        //   [hexchar] 0xFF 0xFF [ delta ]\n        //\n        // Note: in order to do so properly, we need to\n        // make sure that the bytes are base64 aligned, so\n        // we have to add a leading 0x00:\n\n        var newcode = chr(0) + // base64 padding byte\n        chr16(endChar) + chr16(0xffff) + // \"endCount\" array\n        chr16(0) + // cmap required padding\n        chr16(endChar) + chr16(0xffff) + // \"startCount\" array\n        chr16(delta) + // delta value\n        chr16(1); // delta terminator\n\n        var newhex = btoa(newcode); // And now we replace the text in 'base64' at\n        // position 380 with this new base64 string:\n\n        this.base64 = this.base64.substring(0, 380) + newhex + this.base64.substring(380 + newhex.length);\n      }\n    }\n  }\n\n  this.bootstrapValidation(printChar, false);\n};\n\nFont.prototype.bootstrapValidation = function (printChar, timeout) {\n  // Create a stylesheet for using the zero-width font:\n  var tfName = this.fontFamily + ' testfont';\n  var zerowidth = document.createElement('style');\n  zerowidth.setAttribute('type', 'text/css');\n  zerowidth.innerHTML = '@font-face {\\n' + \"  font-family: '\" + tfName + \"';\\n\" + \"  src: url('data:application/x-font-ttf;base64,\" + this.base64 + \"')\\n\" + \"       format('truetype');}\";\n  document.head.appendChild(zerowidth); // Create a validation stylesheet for the requested font, if it's a remote font:\n\n  var realfont = false;\n\n  if (!this.systemfont) {\n    realfont = this.toStyleNode();\n    document.head.appendChild(realfont);\n  } // Create a validation paragraph, consisting of the zero-width character\n\n\n  var para = document.createElement('p');\n  para.style.cssText = 'position: absolute; top: 0; left: 0; opacity: 0;';\n  para.style.fontFamily = \"'\" + this.fontFamily + \"', '\" + tfName + \"'\";\n  para.innerHTML = printChar + printChar + printChar + printChar + printChar + printChar + printChar + printChar + printChar + printChar;\n  document.body.appendChild(para); // Quasi-error: if there is no getComputedStyle, claim loading is done.\n\n  if (typeof getComputedStyle === 'undefined') {\n    this.onload();\n    error('Error: getComputedStyle is not supported by this browser.\\n' + 'Consequently, Font.onload() cannot be trusted.');\n  } // If there is getComputedStyle, we do proper load completion verification.\n  else {\n      // If this is a remote font, we rely on the indicated quad size\n      // for measurements. If it's a system font there will be no known\n      // quad size, so we simply fix it at 1000 pixels.\n      var quad = this.systemfont ? 1000 : this.metrics.quadsize; // Because we need to 'preload' a canvas with this\n      // font, we have no idea how much surface area\n      // we'll need for text measurements later on. So\n      // be safe, we assign a surface that is quad² big,\n      // and then when measureText is called, we'll\n      // actually build a quick <span> to see how much\n      // of that surface we don't need to look at.\n\n      var canvas = document.createElement('canvas');\n      canvas.width = quad;\n      canvas.height = quad;\n      this.canvas = canvas; // The reason we preload is because some browsers\n      // will also take a few milliseconds to assign a font\n      // to a Canvas2D context, so if measureText is called\n      // later, without this preloaded context, there is no\n      // time for JavaScript to \"pause\" long enough for the\n      // context to properly load the font, and metrics may\n      // be completely wrong. The solution is normally to\n      // add in a setTimeout call, to give the browser a bit\n      // of a breather, but then we can't do synchronous\n      // data returns, and we need a callback just to get\n      // string metrics, which is about as far from desired\n      // as is possible.\n\n      var context = canvas.getContext('2d');\n      context.font = \"1em '\" + this.fontFamily + \"'\";\n      context.fillStyle = 'white';\n      context.fillRect(-1, -1, quad + 2, quad + 2);\n      context.fillStyle = 'black';\n      context.fillText('test text', 50, quad / 2);\n      this.context = context; // ===================================================\n      // Thanks to Opera and Firefox, we need to add in more\n      // \"you can do your thing, browser\" moments. If we\n      // call validate() as a straight function call, the\n      // browser doesn't get the breathing space to perform\n      // page styling. This is a bit mad, but until there's\n      // a JS function for \"make the browser update the page\n      // RIGHT NOW\", we're stuck with this.\n      // ===================================================\n      // We need to alias \"this\" because the keyword \"this\"\n      // becomes the global context after the timeout.\n\n      var local = this;\n\n      var delayedValidate = function delayedValidate() {\n        local.validate(para, zerowidth, realfont, local, timeout);\n      };\n\n      setTimeout(delayedValidate, 50);\n    }\n};\n/**\n * We take a different path for System fonts, because\n * we cannot inspect the actual byte code.\n */\n\n\nFont.prototype.processSystemFont = function () {\n  // Mark system font use-case\n  this.systemfont = true; // There are font-declared metrics to work with.\n\n  this.metrics = false; // However, we do need to check whether the font\n  // is actually installed.\n\n  this.bootstrapValidation('A', 1000);\n};\n/**\n * This gets called when font.src is set, (the binding\n * for which is at the end of this file).\n */\n\n\nFont.prototype.loadFont = function () {\n  var font = this; // System font?\n\n  if (this.url.indexOf('.') === -1) {\n    setTimeout(function () {\n      font.processSystemFont();\n    }, 10);\n    return;\n  } // Remote font.\n\n\n  var xhr = new XMLHttpRequest();\n  xhr.open('GET', font.url, true);\n  xhr.responseType = 'arraybuffer';\n\n  xhr.onload = function (evt) {\n    var arrayBuffer = xhr.response;\n\n    if (arrayBuffer) {\n      font.data = new Uint8Array(arrayBuffer);\n      font.ondownloaded();\n    } else {\n      font.onerror('Error downloading font resource from ' + font.url);\n    }\n  };\n\n  xhr.onerror = function (evt) {\n    font.onerror('Error downloading font resource from ' + font.url);\n  };\n\n  xhr.send(null);\n}; // The stylenode can be added to the document head\n// to make the font available for on-page styling,\n// but it should be requested with .toStyleNode()\n\n\nFont.prototype.styleNode = false;\n/**\n * Get the DOM node associated with this Font\n * object, for page-injection.\n */\n\nFont.prototype.toStyleNode = function () {\n  // If we already built it, pass that reference.\n  if (this.styleNode) {\n    return this.styleNode;\n  } // If not, build a style element\n\n\n  this.styleNode = document.createElement('style');\n  this.styleNode.type = 'text/css'; // fixed IE load Font\n\n  var fixedIEUrl = this.url.replace('.ttf', '.eot');\n  var styletext = '@font-face {\\n';\n  styletext += \"  font-family: '\" + this.fontFamily + \"';\\n\"; //  styletext += \"  src: url('\" + fixedIEUrl + \"') format(eot), url('\" + this.url + \"') format('\" + this.format + \"');\\n\";\n\n  styletext += \"  src: url('\" + this.url + \"') format('\" + this.format + \"');\\n\";\n  styletext += '}';\n  this.styleNode.innerHTML = styletext;\n  return this.styleNode;\n};\n/**\n * Measure a specific string of text, given this font.\n * If the text is too wide for our preallocated canvas,\n * it will be chopped up and the segments measured\n * separately.\n */\n\n\nFont.prototype.measureText = function (textString, fontSize) {\n  if (!this.loaded) {\n    this.onerror('measureText() was called while the font was not yet loaded');\n    return false;\n  } // Set up the right font size.\n\n\n  this.context.font = fontSize + \"px '\" + this.fontFamily + \"'\"; // Get the initial string width through our preloaded Canvas2D context\n\n  var metrics = this.context.measureText(textString); // Assign the remaining default values, because the\n  // TextMetrics object is horribly deficient.\n\n  metrics.fontsize = fontSize;\n  metrics.ascent = 0;\n  metrics.descent = 0;\n  metrics.bounds = {\n    minx: 0,\n    maxx: metrics.width,\n    miny: 0,\n    maxy: 0\n  };\n  metrics.height = 0; // Does the text fit on the canvas? If not, we have to\n  // chop it up and measure each segment separately.\n\n  var segments = [],\n      minSegments = metrics.width / this.metrics.quadsize;\n\n  if (minSegments <= 1) {\n    segments.push(textString);\n  } else {\n    // TODO: add the chopping code here. For now this\n    // code acts as placeholder\n    segments.push(textString);\n  } // run through all segments, updating the metrics as we go.\n\n\n  var segmentLength = segments.length,\n      i;\n\n  for (i = 0; i < segmentLength; i++) {\n    this.measureSegment(segments[i], fontSize, metrics);\n  }\n\n  return metrics;\n};\n/**\n * Measure a section of text, given this font, that is\n * guaranteed to fit on our preallocated canvas.\n */\n\n\nFont.prototype.measureSegment = function (textSegment, fontSize, metrics) {\n  // Shortcut function for getting computed CSS values\n  var getCSSValue = function getCSSValue(element, property) {\n    return document.defaultView.getComputedStyle(element, null).getPropertyValue(property);\n  }; // We are going to be using you ALL over the place, little variable.\n\n\n  var i; // For text leading values, we measure a multiline\n  // text container as built by the browser.\n\n  var leadDiv = document.createElement('div');\n  leadDiv.style.position = 'absolute';\n  leadDiv.style.opacity = 0;\n  leadDiv.style.font = fontSize + \"px '\" + this.fontFamily + \"'\";\n  var numLines = 10;\n  leadDiv.innerHTML = textSegment;\n\n  for (i = 1; i < numLines; i++) {\n    leadDiv.innerHTML += '<br/>' + textSegment;\n  }\n\n  document.body.appendChild(leadDiv); // First we guess at the leading value, using the standard TeX ratio.\n\n  metrics.leading = 1.2 * fontSize; // We then try to get the real value based on how\n  // the browser renders the text.\n\n  var leadDivHeight = getCSSValue(leadDiv, 'height');\n  leadDivHeight = leadDivHeight.replace('px', '');\n\n  if (leadDivHeight >= fontSize * numLines) {\n    metrics.leading = leadDivHeight / numLines | 0;\n  }\n\n  document.body.removeChild(leadDiv); // If we're not with a white-space-only string,\n  // this is all we will be able to do.\n\n  if (/^\\s*$/.test(textSegment)) {\n    return metrics;\n  } // If we're not, let's try some more things.\n\n\n  var canvas = this.canvas,\n      ctx = this.context,\n      quad = this.systemfont ? 1000 : this.metrics.quadsize,\n      w = quad,\n      h = quad,\n      baseline = quad / 2,\n      padding = 50,\n      xpos = (quad - metrics.width) / 2; // SUPER IMPORTANT, HARDCORE NECESSARY STEP:\n  // xpos may be a fractional number at this point, and\n  // that will *complete* screw up line scanning, because\n  // cropping a canvas on fractional coordiantes does\n  // really funky edge interpolation. As such, we force\n  // it to an integer.\n\n  if (xpos !== (xpos | 0)) {\n    xpos = xpos | 0;\n  } // Set all canvas pixeldata values to 255, with all the content\n  // data being 0. This lets us scan for data[i] != 255.\n\n\n  ctx.fillStyle = 'white';\n  ctx.fillRect(-padding, -padding, w + 2 * padding, h + 2 * padding); // Then render the text centered on the canvas surface.\n\n  ctx.fillStyle = 'black';\n  ctx.fillText(textSegment, xpos, baseline); // Rather than getting all four million+ subpixels, we\n  // instead get a (much smaller) subset that we know\n  // contains our text. Canvas pixel data is w*4 by h*4,\n  // because {R,G,B,A} is stored as separate channels in\n  // the array. Hence the factor 4.\n\n  var scanwidth = metrics.width + padding | 0,\n      scanheight = 4 * fontSize,\n      x_offset = xpos - padding / 2,\n      y_offset = baseline - scanheight / 2,\n      pixelData = ctx.getImageData(x_offset, y_offset, scanwidth, scanheight).data; // Set up our scanline variables\n\n  var i = 0,\n      j = 0,\n      w4 = scanwidth * 4,\n      len = pixelData.length,\n      mid = scanheight / 2; // Scan 1: find the ascent using a normal, forward scan\n\n  while (++i < len && pixelData[i] === 255) {}\n\n  var ascent = i / w4 | 0; // Scan 2: find the descent using a reverse scan\n\n  i = len - 1;\n\n  while (--i > 0 && pixelData[i] === 255) {}\n\n  var descent = i / w4 | 0; // Scan 3: find the min-x value, using a forward column scan\n\n  for (i = 0, j = 0; j < scanwidth && pixelData[i] === 255;) {\n    i += w4;\n\n    if (i >= len) {\n      j++;\n      i = i - len + 4;\n    }\n  }\n\n  var minx = j; // Scan 3: find the max-x value, using a reverse column scan\n\n  var step = 1;\n\n  for (i = len - 3, j = 0; j < scanwidth && pixelData[i] === 255;) {\n    i -= w4;\n\n    if (i < 0) {\n      j++;\n      i = len - 3 - step++ * 4;\n    }\n  }\n\n  var maxx = scanwidth - j; // We have all our metrics now, so fill in the\n  // metrics object and return it to the user.\n\n  metrics.ascent = mid - ascent;\n  metrics.descent = descent - mid;\n  metrics.bounds = {\n    minx: minx - padding / 2,\n    maxx: maxx - padding / 2,\n    miny: -metrics.descent,\n    maxy: metrics.ascent\n  };\n  metrics.height = 1 + (descent - ascent);\n  return metrics;\n};\n/**\n * we want Font to do the same thing Image does when\n * we set the \"src\" property value, so we use the\n * Object.defineProperty function to bind a setter\n * that does more than just bind values.\n */\n\n\nObject.defineProperty(Font.prototype, 'src', {\n  set: function set(url) {\n    this.url = url;\n    this.loadFont();\n  }\n});\n/**\n * Bind to global scope\n */\n\nif (typeof define !== 'undefined') {\n  define(function () {\n    return Font;\n  });\n} else {\n  window.Font = Font;\n} // }(window));\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (Font);\n\n//# sourceURL=webpack://okinawa/./lib/font.js/Font.js?");

/***/ }),

/***/ "./src/clocks/clock.js":
/*!*****************************!*\
  !*** ./src/clocks/clock.js ***!
  \*****************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return Clock; });\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar Clock =\n/*#__PURE__*/\nfunction () {\n  function Clock() {\n    _classCallCheck(this, Clock);\n\n    this.startTime = 0; // game init\n\n    this.passedTime = 0; // time passed\n\n    this.ticker500 = 0;\n    this.listeners500 = {};\n    this.ticker1 = 0;\n    this.listeners1 = {};\n    this.ticker5 = 0;\n    this.listeners5 = {};\n  }\n\n  _createClass(Clock, [{\n    key: \"initialize\",\n    value: function initialize() {\n      this.startTime = new Date().getTime(); // Init time\n    }\n  }, {\n    key: \"step\",\n    value: function step(dt) {\n      this.ticker1 += dt;\n      this.ticker5 += dt;\n      this.ticker500 += dt;\n\n      if (this.ticker1 >= 1000) {\n        this.informListeners(this.listeners1);\n        this.ticker1 = 0;\n      }\n\n      if (this.ticker5 >= 5000) {\n        this.informListeners(this.listeners5);\n        this.ticker5 = 0;\n      }\n\n      if (this.ticker500 >= 500) {\n        this.informListeners(this.listeners500);\n        this.ticker500 = 0;\n      }\n    }\n  }, {\n    key: \"draw\",\n    value: function draw() {}\n  }, {\n    key: \"suscribe500\",\n    value: function suscribe500(name, func) {\n      this.listeners500[name] = func;\n    }\n  }, {\n    key: \"suscribeOneSecond\",\n    value: function suscribeOneSecond(name, func) {\n      this.listeners1[name] = func;\n    }\n  }, {\n    key: \"suscribeFiveSeconds\",\n    value: function suscribeFiveSeconds(name, func) {\n      this.listeners5[name] = func;\n    }\n  }, {\n    key: \"informListeners\",\n    value: function informListeners(listenersList) {\n      for (var ob in listenersList) {\n        listenersList[ob](); // call the function\n        // // the callback exists\n        // if (ob[listenersList[ob]] != undefined ) {\n        //   // ob[listenersList[ob]](); // call the function\n        //   listenersList[ob].apply();\n        // }\n      }\n    }\n  }]);\n\n  return Clock;\n}();\n\n\n\n//# sourceURL=webpack://okinawa/./src/clocks/clock.js?");

/***/ }),

/***/ "./src/clocks/unaligned.js":
/*!*********************************!*\
  !*** ./src/clocks/unaligned.js ***!
  \*********************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return UnalignedClock; });\n/* harmony import */ var _engine__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../engine */ \"./src/engine.js\");\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n // Specific clock for every scene (one different instance in each scene)\n// It's not aligned: it means the different subcriptions to the clock are executed in\n// different times: two suscriptions to 500ms events would be called 500ms after each\n// subscription, not at the same time\n\nvar UnalignedClock =\n/*#__PURE__*/\nfunction () {\n  function UnalignedClock() {\n    _classCallCheck(this, UnalignedClock);\n\n    this.clockEvents = {};\n  }\n\n  _createClass(UnalignedClock, [{\n    key: \"initialize\",\n    value: function initialize() {\n      this.clockEvents = {};\n    }\n  }, {\n    key: \"activate\",\n    value: function activate() {// The events could be suscribed since game initalization\n      // so we do not remove them when the scene is activated\n      // this.clockEvents = {};\n    }\n  }, {\n    key: \"suscribe\",\n    value: function suscribe(id, object, func, time) {\n      if (typeof this.clockEvents[id] !== 'undefined') {\n        _engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].logs.log('UnalignedClock::suscribe', 'Object suscribing to clock event with repeated id ' + id);\n      }\n\n      this.clockEvents[id] = {\n        ob: object,\n        f: func,\n        t: time,\n        dt: 0\n      };\n    }\n  }, {\n    key: \"unsuscribe\",\n    value: function unsuscribe(id) {\n      delete this.clockEvents[id];\n    }\n  }, {\n    key: \"step\",\n    value: function step(dt) {\n      var ids = Object.keys(this.clockEvents);\n\n      for (var i = 0, len = ids.length; i < len; i++) {\n        var item = this.clockEvents[ids[i]];\n        item.dt += dt;\n\n        if (item.dt >= item.t) {\n          // engine.logs.log('UnalignedClock::step', 'Suscribed clock call: ' + ids[i]); // + ' ' + item.f);\n          if (typeof item.ob !== 'undefined') {\n            item.ob[item.f]();\n          } else {\n            // Call the suscribed function\n            item.f();\n          }\n\n          item.dt = 0;\n        }\n      }\n    }\n  }]);\n\n  return UnalignedClock;\n}();\n\n\n\n//# sourceURL=webpack://okinawa/./src/clocks/unaligned.js?");

/***/ }),

/***/ "./src/core.js":
/*!*********************!*\
  !*** ./src/core.js ***!
  \*********************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return Core; });\n/* harmony import */ var _engine__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./engine */ \"./src/engine.js\");\n/* harmony import */ var _math_point__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./math/point */ \"./src/math/point.js\");\n/* harmony import */ var _input_input__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./input/input */ \"./src/input/input.js\");\n/* harmony import */ var _gui_gui__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./gui/gui */ \"./src/gui/gui.js\");\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n\n\n\n\n\nvar Core =\n/*#__PURE__*/\nfunction () {\n  function Core() {\n    _classCallCheck(this, Core);\n\n    this.FRAMES_PER_SECOND = 60;\n    this.TIME_PER_FRAME = 1000 / this.FRAMES_PER_SECOND; // milliseconds\n\n    this.paused = false;\n    this.halted = false; // Drawing state\n\n    this.canvas = null;\n    this.ctx = null;\n    this.size = new _math_point__WEBPACK_IMPORTED_MODULE_1__[\"default\"](500, 500); // Should use requestAnimationFrame or not\n\n    this.useAnimationFrame = false;\n    this.timeLastRender = new Date().getTime(); // Time since last render\n\n    this.timeGameStart = new Date().getTime(); // Init time\n    // To count frames per second\n\n    this.fpsPassed = 0; // frames rendered since last time\n\n    this.fps = this.FRAMES_PER_SECOND; // updated only each second\n  } // Game Initialization\n\n\n  _createClass(Core, [{\n    key: \"initialize\",\n    value: function initialize(canvasElementId) {\n      _engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].logs.log('Engine::Core.initialize', 'Initializing engine core object');\n      this.canvas = document.getElementById(canvasElementId);\n      this.size.x = this.canvas.width;\n      this.size.y = this.canvas.height;\n      this.timeLastRender = new Date().getMilliseconds();\n      this.ctx = this.canvas.getContext && this.canvas.getContext('2d');\n\n      if (!this.ctx) {\n        _engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].logs.log('Engine::Core.initialize', 'Old browser, unable to create canvas context');\n        alert('Unable to get canvas context. Old browser?');\n        return null;\n      }\n\n      _engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].logs.log('Engine::Core.initialize', 'UserAgent: ' + _engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].device.getUserAgent()); // Sometimes this is slower, I don't know why, and that makes me angry :(\n\n      if (_engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].options.useAnimationFrame === false || window.requestAnimationFrame === null) {\n        this.useAnimationFrame = false;\n        _engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].logs.log('Engine::Core.initialize', 'NOT using requestAnimationFrame');\n      } else {\n        this.useAnimationFrame = true;\n        _engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].logs.log('Engine::Core.initialize', 'Modern browser, using requestAnimationFrame');\n      } // Start main loop\n\n\n      this.loop();\n      return 1;\n    } // Game Initialization\n\n  }, {\n    key: \"activate\",\n    value: function activate() {\n      _engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].logs.log('Engine::activate', 'Starting engine');\n      _engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].game.activate();\n      _engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].gui.activate();\n      _engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].scenes.advanceScene();\n    }\n  }, {\n    key: \"eventKeyPressed\",\n    value: function eventKeyPressed(keyCode) {\n      // engine.logs.log('Engine::eventKeyPressed', 'Key Pressed: ' + keyCode);\n      if (keyCode == _input_input__WEBPACK_IMPORTED_MODULE_2__[\"KEYS\"].P && _engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].options.allowPause === true) {\n        if (this.paused) this.unpauseGame();else if (_engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].scenes.getCurrentScene().playable !== false) this.pauseGame();\n      } else if (keyCode == _input_input__WEBPACK_IMPORTED_MODULE_2__[\"KEYS\"].ESC && _engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].options.allowHalt === true) {\n        if (this.halted) {\n          this.halted = false;\n          _engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].logs.log('Engine::eventKeyPressed', 'Engine un-halted'); // To avoid a jump in animations and movements, as timeLastRender haven has not been\n          // updated since last step()\n\n          this.timeLastRender = new Date().getTime();\n          this.loop();\n        } else {\n          this.halted = true;\n          _engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].logs.log('Engine::eventKeyPressed', 'Engine halted');\n          _engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].gui.get('console').addText('halt', 'Engine halted');\n          _engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].gui.draw(this.ctx); // Force draw before halting the loop\n        }\n      } else if (keyCode == _input_input__WEBPACK_IMPORTED_MODULE_2__[\"KEYS\"].F && _engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].options.allowFForFps === true) {\n        if (_engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].options.showFps === true) _engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].options.showFps = false;else _engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].options.showFps = true;\n      }\n    } // Game Loop\n\n  }, {\n    key: \"loop\",\n    value: function loop() {\n      var now = new Date().getTime();\n      var dt = now - this.timeLastRender;\n\n      if (dt >= _engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].core.TIME_PER_FRAME) {\n        this.timeLastRender = now;\n        var sc = _engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].scenes.getCurrentScene();\n\n        if (this.halted) {\n          return;\n        } // Only the current scene\n\n\n        if (sc && sc.isCurrent === true) {\n          // Only advance game logic if game is not paused\n          if (this.paused === false) {\n            sc.step(dt);\n\n            if (_engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].game !== undefined) {\n              _engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].game.step(dt);\n            }\n\n            _engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].effects.step(dt);\n            _engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].particles.step(dt);\n          }\n\n          _engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].clock.step(dt);\n          _engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].gui.step(dt);\n          _engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].player.step(dt); // Render current level\n\n          sc.draw(this.ctx);\n          _engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].effects.draw(this.ctx);\n          _engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].particles.draw(this.ctx); // FPS related stuff\n\n          this.fpsPassed++;\n\n          if (_engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].options.showStatistics === true) {\n            if (sc.getAttachedItems().length > 0) {\n              _engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].gui.get('console').addText('numItems', sc.getAttachedItems().length + ' ' + _engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].localization.get('items'));\n            }\n\n            if (_engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].effects.effects.length > 0) {\n              _engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].gui.get('console').addText('numEffects', _engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].effects.effects.length + ' ' + _engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].localization.get('effects'));\n            }\n\n            if (_engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].particles.particles.length > 0) {\n              _engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].gui.get('console').addText('numParticles', _engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].particles.particles.length + ' ' + _engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].localization.get('particles'));\n            }\n          }\n\n          _engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].gui.draw(this.ctx);\n        } // If the loop has been executed, wait a full TIME_PER_FRAME until next loop step\n\n\n        dt = 0;\n      }\n\n      if (this.useAnimationFrame === true) {\n        window.requestAnimationFrame(function () {\n          _engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].core.loop();\n        });\n      } else {\n        setTimeout(function () {\n          _engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].core.loop();\n        }, _engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].core.TIME_PER_FRAME - dt);\n      }\n    }\n  }, {\n    key: \"clearScreen\",\n    value: function clearScreen() {\n      this.ctx.clearRect(0, 0, this.size.x, this.size.y);\n    }\n  }, {\n    key: \"pauseGame\",\n    value: function pauseGame() {\n      if (_engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].options.allowPause === false) return;\n      this.paused = true;\n\n      if (_engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].gui.get('pause') === null) {\n        var text = new _gui_gui__WEBPACK_IMPORTED_MODULE_3__[\"GuiText\"](_engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].localization.get('paused'), 500, 30);\n        text.setFontColor('#FF2222');\n        text.setAlign(_gui_gui__WEBPACK_IMPORTED_MODULE_3__[\"ALIGN\"].CENTER);\n        text.setPosition(this.size.x / 2, this.size.y / 2 + 100);\n        _engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].gui.attachItem(text, 'pause');\n      }\n    }\n  }, {\n    key: \"unpauseGame\",\n    value: function unpauseGame() {\n      if (_engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].options.allowPause === false) return;\n      this.paused = false;\n      _engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].gui.detachItem('pause');\n    }\n  }]);\n\n  return Core;\n}();\n\n\n\n//# sourceURL=webpack://okinawa/./src/core.js?");

/***/ }),

/***/ "./src/device.js":
/*!***********************!*\
  !*** ./src/device.js ***!
  \***********************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return Device; });\n/* harmony import */ var _engine__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./engine */ \"./src/engine.js\");\n/* harmony import */ var _math_math__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./math/math */ \"./src/math/math.js\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./utils */ \"./src/utils.js\");\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n// Object to store screen, graphical, and browser auxiliar\n// functions that have no other place to be ;)\n\n\n\n\nvar Device =\n/*#__PURE__*/\nfunction () {\n  function Device() {\n    _classCallCheck(this, Device);\n\n    this.canvasGlobalOffset = new _math_math__WEBPACK_IMPORTED_MODULE_1__[\"Point\"]();\n    this.isTouchDevice = false;\n    this.isResizing = false;\n    this._clearTimeOutId = null;\n  }\n\n  _createClass(Device, [{\n    key: \"initialize\",\n    value: function initialize() {\n      var _this = this;\n\n      this.isTouchDevice = this.detectTouchDevice();\n\n      if (this.isTouchDevice) {\n        _engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].logs.log('Engine::Initialize', 'Touch device detected');\n      } else {\n        _engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].logs.log('Engine::Initialize', 'Touch device NOT detected');\n      } // Get the offset of the DOM element used to capture the touch events\n\n\n      this.canvasGlobalOffset = _engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].device.getGlobalOffset(_engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].core.canvas);\n      Object(_utils__WEBPACK_IMPORTED_MODULE_2__[\"addEvent\"])('resize', window, function () {\n        _engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].device.isResizing = true;\n\n        if (_engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].options.showResizeMessage === true) {\n          _engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].gui.get('console').addText('resize', 'Resizing!'); // engine.logs.log('Engine::INPUT.Controller.onResize', 'Window resized');\n        } // Recalculate if window is resized\n\n\n        _engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].device.canvasGlobalOffset = _engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].device.getGlobalOffset(_engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].core.canvas);\n        clearTimeout(_this._clearTimeOutId);\n        _this._clearTimeOutId = setTimeout(_engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].device.doneResizing, 1000);\n      });\n\n      if (_engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].options.avoidLeavingPage === true) {\n        this.avoidLeavingPage();\n      }\n    }\n  }, {\n    key: \"doneResizing\",\n    value: function doneResizing() {\n      _engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].device.isResizing = false;\n\n      if (_engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].options.showResizeMessage === true) {\n        _engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].gui.get('console').addText('resize', 'Resizing done');\n      }\n    }\n  }, {\n    key: \"activate\",\n    value: function activate() {}\n  }, {\n    key: \"getGlobalScroll\",\n    value: function getGlobalScroll() {\n      var pos = new _math_math__WEBPACK_IMPORTED_MODULE_1__[\"Point\"](0, 0); // All browsers except IE < 9\n\n      if (window.pageYOffset) {\n        pos.x = window.pageXOffset;\n        pos.y = window.pageYOffset;\n      } else {\n        // Try to fall back if IE < 9, don't know for sure if this is gonna\n        // work fine\n        var element = document.getElementsByTagName('html')[0];\n\n        if (element.scrollTop) {\n          pos.x = element.scrollLeft;\n          pos.y = element.scrollTop;\n        }\n      }\n\n      return pos;\n    } // Distance in pixels of a DOM element from the origin of the navigator\n\n  }, {\n    key: \"getGlobalOffset\",\n    value: function getGlobalOffset(element) {\n      var pos = new _math_math__WEBPACK_IMPORTED_MODULE_1__[\"Point\"](0, 0);\n      pos.x = element.offsetLeft;\n      pos.y = element.offsetTop;\n\n      while (element = element.offsetParent) {\n        pos.x += element.offsetLeft;\n        pos.y += element.offsetTop;\n      }\n\n      return pos;\n    }\n  }, {\n    key: \"detectTouchDevice\",\n    value: function detectTouchDevice() {\n      // eslint undefined error with DocumentTouch\n\n      /* global DocumentTouch */\n      if ('ontouchstart' in window || window.DocumentTouch && document instanceof DocumentTouch) {\n        return true;\n      }\n\n      return false;\n    }\n  }, {\n    key: \"getUserAgent\",\n    value: function getUserAgent() {\n      return navigator.userAgent;\n    }\n  }, {\n    key: \"avoidLeavingPage\",\n    value: function avoidLeavingPage() {\n      window.onbeforeunload = function () {\n        return '';\n      };\n    } // Tricks got from stackoverflow\n    // http://stackoverflow.com/questions/3665115/create-a-file-in-memory-for-user-to-download-not-through-server\n\n  }, {\n    key: \"createAndDownloadFile\",\n    value: function createAndDownloadFile(filename, text) {\n      // IE\n      if (window.navigator.msSaveOrOpenBlob) {\n        var blob = new Blob([text], {\n          type: 'text/csv;charset=utf-8;'\n        });\n        window.navigator.msSaveOrOpenBlob(blob, filename);\n      } // Other browsers\n      else {\n          var link = document.createElement('a');\n          link.setAttribute('href', 'data:text/plain;charset=utf-8,' + encodeURIComponent(text));\n          link.setAttribute('download', filename); // In Firefox the element has to be placed inside the DOM\n\n          document.body.appendChild(link);\n          link.click();\n          document.body.removeChild(link);\n        }\n    } // Duplicated in utils.js, as a global function, just for really, really old IEs\n\n  }, {\n    key: \"detectIE\",\n    value: function detectIE() {\n      var userAgent = navigator.userAgent.toLowerCase();\n\n      if (/msie/.test(userAgent)) {\n        return parseFloat((userAgent.match(/.*(?:rv|ie)[/: ](.+?)([ );]|$)/) || [])[1]);\n      }\n\n      if (navigator.appVersion.indexOf('Trident/') > 0) {\n        return 11;\n      }\n\n      return -1;\n    }\n  }, {\n    key: \"isIE\",\n    value: function isIE() {\n      // First detect IE 6-10, second detect IE 11\n      if (navigator.userAgent.indexOf('MSIE') !== -1 || navigator.appVersion.indexOf('Trident/') > 0) {\n        return true;\n      }\n\n      return false;\n    }\n  }]);\n\n  return Device;\n}();\n\n\n\n//# sourceURL=webpack://okinawa/./src/device.js?");

/***/ }),

/***/ "./src/effects/effect.js":
/*!*******************************!*\
  !*** ./src/effects/effect.js ***!
  \*******************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return Effect; });\n/* harmony import */ var _engine__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../engine */ \"./src/engine.js\");\n/* harmony import */ var _item__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../item */ \"./src/item.js\");\n/* harmony import */ var _math_math__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../math/math */ \"./src/math/math.js\");\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _get(target, property, receiver) { if (typeof Reflect !== \"undefined\" && Reflect.get) { _get = Reflect.get; } else { _get = function _get(target, property, receiver) { var base = _superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return _get(target, property, receiver || target); }\n\nfunction _superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = _getPrototypeOf(object); if (object === null) break; } return object; }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\n\n\n\n\nvar Effect =\n/*#__PURE__*/\nfunction (_Item) {\n  _inherits(Effect, _Item);\n\n  function Effect(effectType, x, y, vx, vy) {\n    var _this;\n\n    _classCallCheck(this, Effect);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Effect).call(this));\n    var spriteData = _engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].sprites.sprites[effectType];\n    _this.size = new _math_math__WEBPACK_IMPORTED_MODULE_2__[\"Point\"](spriteData[3], spriteData[4]);\n    _this.numFrames = spriteData[5]; // position of the particle\n\n    _this.position = new _math_math__WEBPACK_IMPORTED_MODULE_2__[\"Point\"](x, y); // velocity vector of the particle\n\n    _this.speed = new _math_math__WEBPACK_IMPORTED_MODULE_2__[\"Point\"](vx, vy);\n    _this.lived = 0; // Num of steps lived\n\n    _this.lifeTime = 0; // Max num of steps to live (if 0 then ignored)\n\n    _this.maxLoops = 1; // Num of loops to be rendered\n\n    _this.spriteName = effectType;\n    _this.initialScaling = 1;\n    _this.finalScaling = 1;\n    _this.transparencyMethod = 0; // 0 -> no, 1->appear, 2->disappear\n\n    _this.globalAlpha = 1;\n    return _this;\n  }\n\n  _createClass(Effect, [{\n    key: \"step\",\n    value: function step(dt) {\n      // Call inherited function\n      _get(_getPrototypeOf(Effect.prototype), \"step\", this).call(this, dt); // let preFrame = this.currentFrame;\n\n\n      this.lived++;\n      var newScaling = 1;\n\n      if (this.initialScaling != 1 || this.finalScaling != 1) {\n        newScaling = this.initialScaling + (this.finalScaling - this.initialScaling) * this.lived / this.lifeTime;\n        this.scaling.x = newScaling;\n        this.scaling.y = newScaling;\n      }\n\n      if (this.transparencyMethod == 2) {\n        // disappearing\n        if (this.lifeTime !== 0) {\n          this.globalAlpha = 1 - this.lived / this.lifeTime;\n        } else {\n          this.globalAlpha = 1 - this.currentFrame / this.numFrames;\n        }\n      } else if (this.transparencyMethod == 1) {\n        // appearing\n        if (this.lifeTime !== 0) {\n          this.globalAlpha = this.lived / this.lifeTime;\n        } else {\n          this.globalAlpha = this.currentFrame / this.numFrames;\n        }\n      } // If the effect is animated, advance its frames\n\n\n      if (this.isAnimated === true) {\n        _engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].sprites.step(dt, this);\n      } // if (preFrame != this.currentFrame)\n      //   engine.logs.log('Effect', 'pre ' + preFrame + ' current ' + this.currentFrame);\n\n    }\n  }, {\n    key: \"draw\",\n    value: function draw(ctx) {\n      // Call inherited function\n      _get(_getPrototypeOf(Effect.prototype), \"draw\", this).call(this, ctx);\n    }\n  }]);\n\n  return Effect;\n}(_item__WEBPACK_IMPORTED_MODULE_1__[\"default\"]);\n\n\n\n//# sourceURL=webpack://okinawa/./src/effects/effect.js?");

/***/ }),

/***/ "./src/effects/effects.js":
/*!********************************!*\
  !*** ./src/effects/effects.js ***!
  \********************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return Effects; });\n/* harmony import */ var _effect__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./effect */ \"./src/effects/effect.js\");\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n\n\nvar Effects =\n/*#__PURE__*/\nfunction () {\n  function Effects() {\n    _classCallCheck(this, Effects);\n\n    this.effects = [];\n    this.removed = [];\n  }\n\n  _createClass(Effects, [{\n    key: \"initialize\",\n    value: function initialize() {\n      // engine.logs.log('Effects::initialize', 'Initializing effects Handler');\n      this.effects.length = 0;\n    }\n  }, {\n    key: \"removeEffect\",\n    value: function removeEffect(eff) {\n      this.removed.push(eff);\n    } // Reset the list of removed objects\n\n  }, {\n    key: \"_resetRemoved\",\n    value: function _resetRemoved() {\n      this.removed.length = 0;\n    } // Remove any objects marked for removal\n\n  }, {\n    key: \"_finalizeRemoved\",\n    value: function _finalizeRemoved() {\n      for (var i = 0, len = this.removed.length; i < len; i++) {\n        var idx = this.effects.indexOf(this.removed[i]);\n\n        if (idx != -1) {\n          this.effects.splice(idx, 1);\n        }\n      }\n    }\n  }, {\n    key: \"step\",\n    value: function step(dt) {\n      this._resetRemoved();\n\n      for (var i = 0, len = this.effects.length; i < len; i++) {\n        var eff = this.effects[i];\n        eff.step(dt); // Effect lasts only the expected lifetime\n\n        if (eff.lifeTime > 0 && eff.lived > eff.lifeTime) {\n          this.removeEffect(eff);\n        } // Effect lasts only one complete loop\n\n\n        if (eff.maxLoops > 0 && eff.numLoops > eff.maxLoops) {\n          this.removeEffect(eff);\n        }\n      }\n\n      this._finalizeRemoved();\n    }\n  }, {\n    key: \"draw\",\n    value: function draw(ctx) {\n      for (var i = 0, len = this.effects.length; i < len; i++) {\n        this.effects[i].draw(ctx);\n      }\n    } // The coordinates passed are the ones from the center\n\n  }, {\n    key: \"addEffect\",\n    value: function addEffect(type, x, y, vx, vy) {\n      // var effectH = engine.sprites.sprites[type][3];\n      // var effectW = engine.sprites.sprites[type][4];\n      var eff = new _effect__WEBPACK_IMPORTED_MODULE_0__[\"default\"](type, x, y, vx, vy);\n      this.effects.push(eff); // Returns the effect to add further changes\n\n      return eff;\n    }\n  }]);\n\n  return Effects;\n}();\n\n\n\n//# sourceURL=webpack://okinawa/./src/effects/effects.js?");

/***/ }),

/***/ "./src/effects/emitter.js":
/*!********************************!*\
  !*** ./src/effects/emitter.js ***!
  \********************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return Emitter; });\n/* harmony import */ var _engine__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../engine */ \"./src/engine.js\");\n/* harmony import */ var _item__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../item */ \"./src/item.js\");\n/* harmony import */ var _math_math__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../math/math */ \"./src/math/math.js\");\n/* harmony import */ var _particle__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./particle */ \"./src/effects/particle.js\");\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _get(target, property, receiver) { if (typeof Reflect !== \"undefined\" && Reflect.get) { _get = Reflect.get; } else { _get = function _get(target, property, receiver) { var base = _superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return _get(target, property, receiver || target); }\n\nfunction _superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = _getPrototypeOf(object); if (object === null) break; } return object; }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\n\n\n\n\n\nvar Emitter =\n/*#__PURE__*/\nfunction (_Item) {\n  _inherits(Emitter, _Item);\n\n  function Emitter(particleSpeed, magnitude, spread) {\n    var _this;\n\n    _classCallCheck(this, Emitter);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Emitter).call(this)); // this.position = new MATH.Point(0, 0);\n    // this.speed    = new MATH.Point(0, 0);\n\n    _this.size = new _math_math__WEBPACK_IMPORTED_MODULE_2__[\"Point\"](10, 10); // velocity vector of the particles\n\n    _this.particleSpeed = particleSpeed;\n    _this.magnitude = magnitude;\n    _this.particleColor = [255, 255, 255, 255]; // [255,47,30,255]; // [66,167,222,255];\n\n    _this.particleLife = 100;\n    _this.particleSize = 3;\n    _this.started = false;\n    _this.spread = spread;\n    _this.emissionRate = 3;\n    return _this;\n  }\n\n  _createClass(Emitter, [{\n    key: \"start\",\n    value: function start() {\n      this.started = true;\n    }\n  }, {\n    key: \"stop\",\n    value: function stop() {\n      this.started = false;\n    }\n  }, {\n    key: \"createParticle\",\n    value: function createParticle() {\n      var modifier = Math.random() * this.spread - this.spread / 2;\n      var angle = this.getRotation() + modifier;\n      var direction = _math_math__WEBPACK_IMPORTED_MODULE_2__[\"angleToDirectionVector\"](angle);\n      direction = direction.normalize();\n      var particleSpeed = new _math_math__WEBPACK_IMPORTED_MODULE_2__[\"Point\"](direction.x * this.particleSpeed, direction.y * this.particleSpeed); // Initial position of the particle\n\n      var position = this.getPosition();\n      var particle = new _particle__WEBPACK_IMPORTED_MODULE_3__[\"default\"](position, particleSpeed);\n      particle.ttl = Math.random() * this.particleLife;\n      particle.color = this.particleColor;\n      particle.size = this.particleSize; // this.particles.push(particle);\n\n      _engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].particles.addParticle(particle);\n    }\n  }, {\n    key: \"step\",\n    value: function step(dt) {\n      _get(_getPrototypeOf(Emitter.prototype), \"step\", this).call(this, dt); // this.emissionCount = this.emissionCount++ % this.emissionRate;\n\n\n      if (this.started === true) {\n        for (var i = 0; i < this.emissionRate; i++) {\n          this.createParticle();\n        }\n      }\n    }\n  }, {\n    key: \"draw\",\n    value: function draw(ctx) {\n      _get(_getPrototypeOf(Emitter.prototype), \"draw\", this).call(this, ctx);\n    }\n  }, {\n    key: \"collide\",\n    value: function collide() {\n      // Emitters are not physical objects\n      return false;\n    }\n  }]);\n\n  return Emitter;\n}(_item__WEBPACK_IMPORTED_MODULE_1__[\"default\"]);\n\n\n\n//# sourceURL=webpack://okinawa/./src/effects/emitter.js?");

/***/ }),

/***/ "./src/effects/particle.js":
/*!*********************************!*\
  !*** ./src/effects/particle.js ***!
  \*********************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return Particle; });\n/* harmony import */ var _engine__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../engine */ \"./src/engine.js\");\n/* harmony import */ var _item__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../item */ \"./src/item.js\");\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\n\n\n\nvar Particle =\n/*#__PURE__*/\nfunction (_Item) {\n  _inherits(Particle, _Item);\n\n  function Particle(position, speed) {\n    var _this;\n\n    _classCallCheck(this, Particle);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Particle).call(this));\n\n    _this.setPosition(position.x, position.y);\n\n    _this.setSpeed(speed.x, speed.y);\n\n    _this.ttl = -1;\n    _this.lived = 0;\n    _this.color = [];\n    _this.size = 2;\n    return _this;\n  }\n\n  _createClass(Particle, [{\n    key: \"initialize\",\n    value: function initialize() {}\n  }, {\n    key: \"activate\",\n    value: function activate() {}\n  }, {\n    key: \"step\",\n    value: function step(dt) {\n      this.move(this.speed.x * dt / _engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].core.TIME_PER_FRAME, this.speed.y * dt / _engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].core.TIME_PER_FRAME);\n      this.lived++;\n    } // Not needed, the particles will be drawn inside the ParticleCollection object\n\n  }, {\n    key: \"draw\",\n    value: function draw() {} // Will never be used, the particles are not attached to the scene\n\n  }, {\n    key: \"collide\",\n    value: function collide() {\n      // Particles are not physical objects\n      return false;\n    }\n  }]);\n\n  return Particle;\n}(_item__WEBPACK_IMPORTED_MODULE_1__[\"default\"]);\n\n\n\n//# sourceURL=webpack://okinawa/./src/effects/particle.js?");

/***/ }),

/***/ "./src/effects/particles.js":
/*!**********************************!*\
  !*** ./src/effects/particles.js ***!
  \**********************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return Particles; });\n/* harmony import */ var _engine__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../engine */ \"./src/engine.js\");\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n\n\nvar Particles =\n/*#__PURE__*/\nfunction () {\n  function Particles() {\n    _classCallCheck(this, Particles);\n\n    this.particles = [];\n    this.maxParticles = 10000;\n    this._removedParticles = []; // particles to be removed at the end of step()\n\n    this.effectField = document.createElement('canvas');\n    this.effectField.width = _engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].core.size.x;\n    this.effectField.height = _engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].core.size.y;\n    this.effectField.ctx = this.effectField.getContext('2d'); // this.effectField.ctx.globalCompositeOperation = 'darker';\n    // this.effectField.ctx.fillStyle = 'rgba(' + this.particleColor.join(',') + ')';\n  }\n\n  _createClass(Particles, [{\n    key: \"initialize\",\n    value: function initialize() {\n      this.particles = [];\n      this.maxParticles = 10000;\n      this._removedParticles = [];\n    }\n  }, {\n    key: \"addParticle\",\n    value: function addParticle(particle) {\n      if (this.particles.length > this.maxParticles) {\n        return;\n      }\n\n      this.particles.push(particle);\n    }\n  }, {\n    key: \"removeParticle\",\n    value: function removeParticle(what) {\n      this._removedParticles.push(what);\n    }\n  }, {\n    key: \"_resetItems\",\n    value: function _resetItems() {\n      this.particles.length = 0;\n    } // Reset the list of removed items\n\n  }, {\n    key: \"_resetRemoved\",\n    value: function _resetRemoved() {\n      this._removedParticles.length = 0;\n    } // Remove any items marked for removal\n\n  }, {\n    key: \"_finalizeRemoved\",\n    value: function _finalizeRemoved() {\n      for (var i = 0, len = this._removedParticles.length; i < len; i++) {\n        var what = this._removedParticles[i];\n        var idx = this.particles.indexOf(what);\n\n        if (idx != -1) {\n          // what.detachAllItems();\n          this.particles.splice(idx, 1);\n        }\n      }\n    }\n  }, {\n    key: \"step\",\n    value: function step(dt) {\n      var i,\n          len = this.particles.length,\n          p;\n\n      for (i = 0; i < len; i++) {\n        p = this.particles[i];\n\n        if (p.lived > p.ttl) {\n          this.removeParticle(p);\n        } else {\n          p.step(dt);\n        }\n      } // Remove any objects marked for removal\n\n\n      this._finalizeRemoved(); // Reset the list of removed objects\n      // this._resetRemoved();\n\n    }\n  }, {\n    key: \"draw\",\n    value: function draw(ctx) {\n      if (this.particles.length > 0) {\n        this.effectField.ctx.clearRect(0, 0, _engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].core.size.x, _engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].core.size.y);\n        var particle,\n            i = -1;\n\n        while (particle = this.particles[++i]) {\n          var tmpColor = [particle.color[0] - particle.lived * 3, particle.color[1] - particle.lived, particle.color[2], particle.color[3]];\n          this.effectField.ctx.fillStyle = 'rgba(' + tmpColor.join(',') + ')';\n          this.effectField.ctx.fillRect(particle.position.x, particle.position.y, particle.size, particle.size);\n        }\n\n        ctx.drawImage(this.effectField, 0, 0, _engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].core.size.x, _engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].core.size.y);\n      }\n    }\n  }]);\n\n  return Particles;\n}();\n\n\n\n//# sourceURL=webpack://okinawa/./src/effects/particles.js?");

/***/ }),

/***/ "./src/engine.js":
/*!***********************!*\
  !*** ./src/engine.js ***!
  \***********************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _options__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./options */ \"./src/options.js\");\n/* harmony import */ var _logs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./logs */ \"./src/logs.js\");\n/* harmony import */ var _core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./core */ \"./src/core.js\");\n/* harmony import */ var _device__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./device */ \"./src/device.js\");\n/* harmony import */ var _effects_effects__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./effects/effects */ \"./src/effects/effects.js\");\n/* harmony import */ var _effects_particles__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./effects/particles */ \"./src/effects/particles.js\");\n/* harmony import */ var _handlers_sprites__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./handlers/sprites */ \"./src/handlers/sprites.js\");\n/* harmony import */ var _handlers_sounds__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./handlers/sounds */ \"./src/handlers/sounds.js\");\n/* harmony import */ var _handlers_fonts__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./handlers/fonts */ \"./src/handlers/fonts.js\");\n/* harmony import */ var _clocks_clock__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./clocks/clock */ \"./src/clocks/clock.js\");\n/* harmony import */ var _localization_localization__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./localization/localization */ \"./src/localization/localization.js\");\n/* harmony import */ var _input_input__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./input/input */ \"./src/input/input.js\");\n/* harmony import */ var _gui_gui__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./gui/gui */ \"./src/gui/gui.js\");\n/* harmony import */ var _scenes_scenes__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./scenes/scenes */ \"./src/scenes/scenes.js\");\n/* harmony import */ var _scenes_preloader__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./scenes/preloader */ \"./src/scenes/preloader.js\");\n/* harmony import */ var _player__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./player */ \"./src/player.js\");\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar Engine =\n/*#__PURE__*/\nfunction () {\n  function Engine() {\n    _classCallCheck(this, Engine);\n\n    this.options = null;\n    this.logs = null;\n    this.core = null;\n    this.device = null;\n    this.effects = null;\n    this.particles = null;\n    this.sprites = null;\n    this.sounds = null;\n    this.fonts = null;\n    this.clock = null;\n    this.localization = null;\n    this.input = null;\n    this.controls = null;\n    this.gui = null;\n    this.scenes = null;\n    this.preloader = null;\n    this.game = null;\n    this.externalCallback = null;\n    this.player = null;\n  }\n\n  _createClass(Engine, [{\n    key: \"initialize\",\n    value: function initialize(canvasElementId, gameObject, callbackFunction) {\n      var _this = this;\n\n      this.options = new _options__WEBPACK_IMPORTED_MODULE_0__[\"default\"]();\n      this.logs = new _logs__WEBPACK_IMPORTED_MODULE_1__[\"default\"]();\n      this.core = new _core__WEBPACK_IMPORTED_MODULE_2__[\"default\"]();\n      this.device = new _device__WEBPACK_IMPORTED_MODULE_3__[\"default\"]();\n      this.effects = new _effects_effects__WEBPACK_IMPORTED_MODULE_4__[\"default\"]();\n      this.particles = new _effects_particles__WEBPACK_IMPORTED_MODULE_5__[\"default\"]();\n      this.sprites = new _handlers_sprites__WEBPACK_IMPORTED_MODULE_6__[\"default\"]();\n      this.sounds = new _handlers_sounds__WEBPACK_IMPORTED_MODULE_7__[\"default\"]();\n      this.fonts = new _handlers_fonts__WEBPACK_IMPORTED_MODULE_8__[\"default\"]();\n      this.clock = new _clocks_clock__WEBPACK_IMPORTED_MODULE_9__[\"default\"]();\n      this.localization = new _localization_localization__WEBPACK_IMPORTED_MODULE_10__[\"default\"]();\n      this.input = new _input_input__WEBPACK_IMPORTED_MODULE_11__[\"Controller\"]();\n      this.gui = new _gui_gui__WEBPACK_IMPORTED_MODULE_12__[\"GuiElement\"]();\n      this.scenes = new _scenes_scenes__WEBPACK_IMPORTED_MODULE_13__[\"default\"]();\n      this.preloader = new _scenes_preloader__WEBPACK_IMPORTED_MODULE_14__[\"default\"](); // empty player object, probably it will be crushed by\n      // a specific game player object\n\n      this.player = new _player__WEBPACK_IMPORTED_MODULE_15__[\"default\"]();\n      this.logs.log('Engine::initialize', 'Initializing starts...'); // try {\n      //   this.game = new window[gameObject]();\n      // } catch (err) {\n      //   this.logs.log('Engine::initialize', 'Error instantiating game class');\n      //   return;\n      // }\n\n      this.game = gameObject;\n\n      if (callbackFunction !== null) {\n        this.externalCallback = callbackFunction;\n      }\n\n      this.core.initialize(canvasElementId);\n      this.device.initialize();\n      this.effects.initialize();\n      this.particles.initialize();\n      this.sprites.initialize();\n      this.sounds.initialize();\n      this.clock.initialize();\n      this.clock.suscribeOneSecond('testFPS', function () {\n        if (_this.options.showFps) {\n          _this.gui.get('console').addText('fps', _this.core.fpsPassed + ' fps');\n        }\n\n        _this.core.fpsPassed = 0;\n      });\n      this.input.initialize();\n      this.localization.initialize(); // TODO maybe remove this from global engine someday\n      // Global GUI\n\n      var console = new _gui_gui__WEBPACK_IMPORTED_MODULE_12__[\"GuiConsole\"]();\n      console.setSize(170, 30);\n      console.setPosition(15 + console.size.x / 2, 15 + console.size.y / 2); // left down\n\n      console.order = _gui_gui__WEBPACK_IMPORTED_MODULE_12__[\"ORDENATION\"].UP;\n      this.gui.initialize();\n      this.gui.attachItem(console, 'console');\n      this.scenes.initialize();\n      this.preloader.playable = false; // Just in case\n\n      this.preloader.initialize();\n      this.game.initialize();\n    }\n  }, {\n    key: \"external\",\n    value: function external(eventType, id, message) {\n      var _this2 = this;\n\n      if (this.externalCallback !== null) {\n        setTimeout(function () {\n          try {\n            _this2.externalCallback(eventType, id, message);\n          } catch (err) {\n            _this2.logs.log('Engine::external', 'Error with external callback with event ' + eventType + ' ' + id);\n          }\n        }, 1);\n      }\n    }\n  }]);\n\n  return Engine;\n}(); // singleton pattern\n\n\nvar engine = new Engine();\n/* harmony default export */ __webpack_exports__[\"default\"] = (engine);\n\n//# sourceURL=webpack://okinawa/./src/engine.js?");

/***/ }),

/***/ "./src/gui/gui.js":
/*!************************!*\
  !*** ./src/gui/gui.js ***!
  \************************/
/*! exports provided: ORDENATION, EVENTS, ALIGN, GuiText, GuiElement, GuiConsole */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ORDENATION\", function() { return ORDENATION; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"EVENTS\", function() { return EVENTS; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ALIGN\", function() { return ALIGN; });\n/* harmony import */ var _gui_element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./gui_element */ \"./src/gui/gui_element.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"GuiElement\", function() { return _gui_element__WEBPACK_IMPORTED_MODULE_0__[\"default\"]; });\n\n/* harmony import */ var _gui_text__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./gui_text */ \"./src/gui/gui_text.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"GuiText\", function() { return _gui_text__WEBPACK_IMPORTED_MODULE_1__[\"default\"]; });\n\n/* harmony import */ var _gui_console__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./gui_console */ \"./src/gui/gui_console.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"GuiConsole\", function() { return _gui_console__WEBPACK_IMPORTED_MODULE_2__[\"default\"]; });\n\n\n\n // Constants\n\nvar ORDENATION = {\n  UP: 0,\n  DOWN: 1\n};\nvar EVENTS = {\n  SELECTION: 0\n};\nvar ALIGN = {\n  LEFT: 'left',\n  RIGHT: 'right',\n  CENTER: 'center'\n};\n\n\n//# sourceURL=webpack://okinawa/./src/gui/gui.js?");

/***/ }),

/***/ "./src/gui/gui_console.js":
/*!********************************!*\
  !*** ./src/gui/gui_console.js ***!
  \********************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return GuiConsole; });\n/* harmony import */ var _gui_element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./gui_element */ \"./src/gui/gui_element.js\");\n/* harmony import */ var _gui_text__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./gui_text */ \"./src/gui/gui_text.js\");\n/* harmony import */ var _gui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./gui */ \"./src/gui/gui.js\");\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _get(target, property, receiver) { if (typeof Reflect !== \"undefined\" && Reflect.get) { _get = Reflect.get; } else { _get = function _get(target, property, receiver) { var base = _superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return _get(target, property, receiver || target); }\n\nfunction _superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = _getPrototypeOf(object); if (object === null) break; } return object; }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\n\n\n\n\nvar GuiConsole =\n/*#__PURE__*/\nfunction (_GuiElement) {\n  _inherits(GuiConsole, _GuiElement);\n\n  function GuiConsole() {\n    var _this;\n\n    _classCallCheck(this, GuiConsole);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(GuiConsole).call(this));\n    _this._texts = {}; // { id : [ 'text to show on scene', GuiText object, insertionTime ] }\n\n    _this._textKeys = []; // keys of this._texts\n\n    _this._textsToRemove = [];\n    _this.order = _gui__WEBPACK_IMPORTED_MODULE_2__[\"ORDENATION\"].DOWN;\n    return _this;\n  }\n\n  _createClass(GuiConsole, [{\n    key: \"initialize\",\n    value: function initialize() {\n      _get(_getPrototypeOf(GuiConsole.prototype), \"initialize\", this).call(this);\n    }\n  }, {\n    key: \"activate\",\n    value: function activate() {\n      _get(_getPrototypeOf(GuiConsole.prototype), \"activate\", this).call(this);\n    }\n  }, {\n    key: \"draw\",\n    value: function draw(ctx) {\n      var len = this._textKeys.length;\n\n      if (len === 0) {\n        return;\n      } // let pos = this.getPosition();\n\n\n      var yPos = 0;\n      var xPos = 0;\n      var now = new Date().getTime();\n\n      for (var i = 0; i < len; i++) {\n        var textInfo = this._texts[this._textKeys[i]];\n        var text = textInfo[1];\n        var time = textInfo[2]; // Delete old messages\n\n        if (time + 2000 < now) {\n          // just marked as \"toRemove\"\n          this._textsToRemove.push(this._textKeys[i]); // this.detachItem(text);\n\n        } else {\n          text.setPosition(xPos, yPos); // text.draw(ctx);\n\n          if (this.order == _gui__WEBPACK_IMPORTED_MODULE_2__[\"ORDENATION\"].DOWN) {\n            yPos = yPos + 20;\n          } else {\n            yPos = yPos - 20;\n          }\n        }\n      } // Call inherited function\n\n\n      _get(_getPrototypeOf(GuiConsole.prototype), \"draw\", this).call(this, ctx);\n    }\n  }, {\n    key: \"step\",\n    value: function step(dt) {\n      // Call inherited function\n      _get(_getPrototypeOf(GuiConsole.prototype), \"step\", this).call(this, dt);\n\n      var len = this._textsToRemove.length;\n\n      if (len > 0) {\n        for (var i = 0; i < len; i++) {\n          this.detachItem(this._textsToRemove[i]);\n          delete this._texts[this._textsToRemove[i]];\n        }\n\n        this._textKeys = Object.keys(this._texts);\n        this._textsToRemove = [];\n      }\n    }\n  }, {\n    key: \"addText\",\n    value: function addText(key, text) {\n      if (typeof this._texts[key] !== 'undefined') {\n        if (this._texts[key][0] != text) {\n          this._texts[key][0] = text;\n\n          this._texts[key][1].setText(text); // Same GuiText object\n\n        }\n\n        this._texts[key][2] = new Date().getTime();\n      } else {\n        var txt = new _gui_text__WEBPACK_IMPORTED_MODULE_1__[\"default\"](text, this.size.x, this.size.y);\n        txt.setSize(this.size.x, this.size.y); // Save time of last text addition\n\n        this._texts[key] = [text, txt, new Date().getTime()];\n        this._textKeys = Object.keys(this._texts);\n        this.attachItem(txt, key);\n      }\n    }\n  }]);\n\n  return GuiConsole;\n}(_gui_element__WEBPACK_IMPORTED_MODULE_0__[\"default\"]);\n\n\n\n//# sourceURL=webpack://okinawa/./src/gui/gui_console.js?");

/***/ }),

/***/ "./src/gui/gui_element.js":
/*!********************************!*\
  !*** ./src/gui/gui_element.js ***!
  \********************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return GuiElement; });\n/* harmony import */ var _item__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../item */ \"./src/item.js\");\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _get(target, property, receiver) { if (typeof Reflect !== \"undefined\" && Reflect.get) { _get = Reflect.get; } else { _get = function _get(target, property, receiver) { var base = _superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return _get(target, property, receiver || target); }\n\nfunction _superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = _getPrototypeOf(object); if (object === null) break; } return object; }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\n\n\nvar GuiElement =\n/*#__PURE__*/\nfunction (_Item) {\n  _inherits(GuiElement, _Item);\n\n  function GuiElement(parentItem) {\n    var _this;\n\n    _classCallCheck(this, GuiElement);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(GuiElement).call(this, parentItem));\n    _this.guiId = null;\n\n    if (typeof parentItem !== 'undefined') {\n      _this.setParent(parentItem);\n    } else {\n      _this.guiId = 'globalGUI';\n    }\n\n    _this.inputCallbacks = {}; // { keyCode : callback_function }\n\n    _this.guiElements = {}; // { \"id\" : guiElement object}\n\n    _this.blink = false;\n    return _this;\n  }\n\n  _createClass(GuiElement, [{\n    key: \"initialize\",\n    value: function initialize() {\n      _get(_getPrototypeOf(GuiElement.prototype), \"initialize\", this).call(this);\n    }\n  }, {\n    key: \"activate\",\n    value: function activate() {\n      _get(_getPrototypeOf(GuiElement.prototype), \"activate\", this).call(this);\n    }\n  }, {\n    key: \"draw\",\n    value: function draw(ctx) {\n      _get(_getPrototypeOf(GuiElement.prototype), \"draw\", this).call(this, ctx);\n    }\n  }, {\n    key: \"step\",\n    value: function step(dt) {\n      _get(_getPrototypeOf(GuiElement.prototype), \"step\", this).call(this, dt);\n    }\n  }, {\n    key: \"setBlink\",\n    value: function setBlink(value) {\n      var scene = this.getParentScene();\n\n      if (scene === null) {\n        return;\n      }\n\n      if (value === true) {\n        this.blink = true;\n        scene.clock.suscribe(this.guiId + '_clock', this, 'blinkStep', 350);\n      } else {\n        this.blink = false;\n        this.setVisible(true);\n        scene.clock.unsuscribe(this.guiId + '_clock');\n      }\n    }\n  }, {\n    key: \"blinkStep\",\n    value: function blinkStep() {\n      if (this.blink === true && this.getVisible() === true) {\n        this.setVisible(false);\n      } else if (this.blink === true && this.getVisible() === false) {\n        this.setVisible(true);\n      } // Should not happen, ever\n      else if (this.blink === false) {\n          this.setVisible(true);\n        }\n    }\n  }, {\n    key: \"addInputCallback\",\n    value: function addInputCallback(key, callback) {\n      var scene = this.getParentScene();\n\n      if (scene === null) {\n        return;\n      }\n\n      scene.input.addKeyListener(this, 'eventKeyPressed', [key], true); // true == inform in pause too\n\n      this.inputCallbacks[key] = callback;\n    }\n  }, {\n    key: \"eventKeyPressed\",\n    value: function eventKeyPressed(keyCode) {\n      // engine.logs.log('Gui.eventKeyPressed', 'Key Pressed: ' + keyCode);\n      if (typeof this.inputCallbacks[keyCode] !== 'undefined') {\n        this.inputCallbacks[keyCode]();\n      }\n    }\n  }, {\n    key: \"getElement\",\n    value: function getElement(id) {\n      var ret = this.guiElements[id];\n\n      if (typeof ret !== 'undefined') {\n        return ret;\n      }\n\n      return null;\n    }\n  }, {\n    key: \"get\",\n    value: function get(id) {\n      return this.getElement(id);\n    }\n  }, {\n    key: \"attachItem\",\n    value: function attachItem(what, id) {\n      this.guiElements[id] = what;\n      what.guiId = id; // this.guiElementsIds = Object.keys(this.guiElements);\n\n      _get(_getPrototypeOf(GuiElement.prototype), \"attachItem\", this).call(this, what);\n    }\n  }, {\n    key: \"detachItem\",\n    value: function detachItem(id) {\n      if (typeof id !== 'undefined') {\n        _get(_getPrototypeOf(GuiElement.prototype), \"detachItem\", this).call(this, this.get(id));\n\n        delete this.guiElements[id]; // this.guiElementsIds = Object.keys(this.guiElements);\n      }\n    }\n  }, {\n    key: \"detachAllItems\",\n    value: function detachAllItems() {\n      var keys = Object.keys(this.guiElements);\n\n      for (var i = 0, len = keys.length; i < len; i++) {\n        // Recursive in-depth\n        this.guiElements[keys[i]].detachAllItems();\n        this.detachItem(keys[i]);\n      }\n\n      this.guiElements = {}; // this.guiElementsIds = [];\n\n      this._finalizeRemoved(); // Don't, in GUI the elements are detached by id, not by object\n      // super.detachAllItems(this);\n\n    }\n  }, {\n    key: \"_resetItems\",\n    value: function _resetItems() {\n      this.attachedItems.length = 0;\n      this.guiElements = {};\n    }\n  }]);\n\n  return GuiElement;\n}(_item__WEBPACK_IMPORTED_MODULE_0__[\"default\"]);\n\n\n\n//# sourceURL=webpack://okinawa/./src/gui/gui_element.js?");

/***/ }),

/***/ "./src/gui/gui_text.js":
/*!*****************************!*\
  !*** ./src/gui/gui_text.js ***!
  \*****************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return GuiText; });\n/* harmony import */ var _gui_element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./gui_element */ \"./src/gui/gui_element.js\");\n/* harmony import */ var _gui__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./gui */ \"./src/gui/gui.js\");\n/* harmony import */ var _math_math__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../math/math */ \"./src/math/math.js\");\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _get(target, property, receiver) { if (typeof Reflect !== \"undefined\" && Reflect.get) { _get = Reflect.get; } else { _get = function _get(target, property, receiver) { var base = _superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return _get(target, property, receiver || target); }\n\nfunction _superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = _getPrototypeOf(object); if (object === null) break; } return object; }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\n\n\n\n\nvar GuiText =\n/*#__PURE__*/\nfunction (_GuiElement) {\n  _inherits(GuiText, _GuiElement);\n\n  function GuiText(txt, x, y) {\n    var _this;\n\n    _classCallCheck(this, GuiText);\n\n    // TODO: parameters?\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(GuiText).call(this));\n    _this.text = txt;\n    _this.font = 'base,BaseFont,\"Courier New\"';\n    _this.fontSize = 20;\n    _this.fontColor = '#FFFFFF'; // white\n\n    _this.fontBorderColor = '#000000'; // black\n\n    _this.textAlign = _gui__WEBPACK_IMPORTED_MODULE_1__[\"ALIGN\"].LEFT; // to avoid magic numbers which really does not fit with\n    // different fonts\n\n    _this.verticalOffset = 20;\n    _this.horizontalOffset = 10;\n\n    if (typeof x === 'undefined' || typeof y === 'undefined') {\n      _this.size.x = 100;\n      _this.size.y = 30;\n    } else {\n      _this.size.x = x;\n      _this.size.y = y;\n    } // New GuiText version with its own canvas\n\n\n    _this._canvasRendering = true;\n    _this._innerCanvas = document.createElement('canvas');\n    _this._innerCanvas.width = _this.size.x;\n    _this._innerCanvas.height = _this.size.y;\n    _this._innerContext = _this._innerCanvas.getContext('2d'); // Should re-render the canvas?\n\n    _this._innerChange = true;\n    return _this;\n  }\n\n  _createClass(GuiText, [{\n    key: \"initialize\",\n    value: function initialize() {\n      _get(_getPrototypeOf(GuiText.prototype), \"initialize\", this).call(this);\n    }\n  }, {\n    key: \"activate\",\n    value: function activate() {\n      _get(_getPrototypeOf(GuiText.prototype), \"activate\", this).call(this);\n    } // Mask Item.getSize\n    // getSize()\n    // {\n    //   var size = super.getSize(this);\n    //   // Be sure the size is never zero, or we will have an exception\n    //   // when trying to render the innerCanvas\n    //   if ((size.x == 0) || (size.y == 0))\n    //     return new MATH.Point(100, 30);\n    //   else\n    //     return size;\n    // }\n\n  }, {\n    key: \"setSize\",\n    value: function setSize(x, y) {\n      _get(_getPrototypeOf(GuiText.prototype), \"setSize\", this).call(this, x, y);\n\n      this._innerCanvas.width = this.size.x;\n      this._innerCanvas.height = this.size.y;\n      this._innerChange = true;\n    } // Mask Item.getPosition\n    // getPosition()\n    // {\n    //   if (this.getParent() != undefined)\n    //   {\n    //     return this.getParent().getPosition();\n    //   }\n    //   return new MATH.Point(0, 0);\n    // }\n\n  }, {\n    key: \"setText\",\n    value: function setText(txt) {\n      if (this.text == txt) {\n        return;\n      }\n\n      this.text = txt;\n      this._innerChange = true;\n    }\n  }, {\n    key: \"getText\",\n    value: function getText() {\n      return this.text;\n    } // receives global context just to compare values if necessary\n\n  }, {\n    key: \"_updateInnerRender\",\n    value: function _updateInnerRender(ctx) {\n      // let pos = this.getPosition();\n      // let size = this.getSize();\n      // let scale = this.getScaling();\n      var where = new _math_math__WEBPACK_IMPORTED_MODULE_2__[\"Point\"](this.horizontalOffset, this.verticalOffset);\n\n      if (this.textAlign == _gui__WEBPACK_IMPORTED_MODULE_1__[\"ALIGN\"].CENTER) {\n        where.x = this.size.x / 2;\n      } else if (this.textAlign == _gui__WEBPACK_IMPORTED_MODULE_1__[\"ALIGN\"].RIGHT) {\n        where.x = this.size.x - this.horizontalOffset;\n      } // use global context values\n\n\n      this._innerContext.lineWidth = ctx.lineWidth;\n\n      this._innerContext.clearRect(0, 0, this.size.x, this.size.y);\n\n      this._innerContext.strokeStyle = this.fontBorderColor;\n      this._innerContext.fillStyle = this.fontColor;\n      this._innerContext.textAlign = this.textAlign;\n      this._innerContext.font = 'bold ' + this.fontSize + 'px ' + this.font; // print the full string\n      // this._innerContext.strokeText(this.getText(), where.x, where.y);\n      // this._innerContext.fillText(this.getText(), where.x, where.y);\n\n      var pieces = this.getText().split('\\n');\n\n      for (var i = 0, len = pieces.length; i < len; i++) {\n        this._innerContext.strokeText(pieces[i], where.x, where.y);\n\n        this._innerContext.fillText(pieces[i], where.x, where.y);\n\n        where.y += this.verticalOffset; // + this.fontSize;\n      }\n\n      this._innerChange = false;\n    }\n  }, {\n    key: \"draw\",\n    value: function draw(ctx) {\n      if (this.getVisible() === true) {\n        var pos = this.getPosition();\n        var size = this.getSize();\n\n        if (this._canvasRendering === false) {\n          // let scale = this.getScaling();\n          var offset = new _math_math__WEBPACK_IMPORTED_MODULE_2__[\"Point\"](this.horizontalOffset, this.verticalOffset);\n\n          if (this.textAlign == _gui__WEBPACK_IMPORTED_MODULE_1__[\"ALIGN\"].CENTER) {\n            offset.x = this.size.x / 2;\n          } else if (this.textAlign == _gui__WEBPACK_IMPORTED_MODULE_1__[\"ALIGN\"].RIGHT) {\n            offset.x = this.size.x - this.horizontalOffset;\n          }\n\n          ctx.strokeStyle = this.fontBorderColor;\n          ctx.fillStyle = this.fontColor;\n          ctx.textAlign = this.textAlign;\n          ctx.font = 'bold ' + this.fontSize + 'px ' + this.font; // print the full string\n          // ctx.strokeText( this.getText(),\n          //                 pos.x - (size.x / 2) + offset.x,\n          //                 pos.y - (size.y / 2) + offset.y);\n          // ctx.fillText( this.getText(),\n          //               pos.x - (size.x / 2) + offset.x,\n          //               pos.y - (size.y / 2) + offset.y);\n\n          var pieces = this.getText().split('\\n');\n\n          for (var i = 0, len = pieces.length; i < len; i++) {\n            ctx.strokeText(pieces[i], pos.x - size.x / 2 + offset.x, pos.y - size.y / 2 + offset.y);\n            ctx.fillText(pieces[i], pos.x - size.x / 2 + offset.x, pos.y - size.y / 2 + offset.y);\n            offset.y += this.verticalOffset; // + this.fontSize;\n          }\n        } else {\n          if (this._innerChange === true) {\n            this._updateInnerRender(ctx);\n          }\n\n          ctx.drawImage(this._innerCanvas, pos.x - this.size.x / 2, pos.y - this.size.y / 2);\n        }\n      } // Call inherited function\n\n\n      _get(_getPrototypeOf(GuiText.prototype), \"draw\", this).call(this, ctx);\n    }\n  }, {\n    key: \"step\",\n    value: function step(dt) {\n      // Call inherited function\n      _get(_getPrototypeOf(GuiText.prototype), \"step\", this).call(this, dt);\n    }\n  }, {\n    key: \"setFont\",\n    value: function setFont(font) {\n      this.font = font;\n    }\n  }, {\n    key: \"setFontSize\",\n    value: function setFontSize(size) {\n      this.fontSize = size;\n    }\n  }, {\n    key: \"setFontColor\",\n    value: function setFontColor(color) {\n      this.fontColor = color;\n    }\n  }, {\n    key: \"setFontBorderColor\",\n    value: function setFontBorderColor(color) {\n      this.fontBorderColor = color;\n    }\n  }, {\n    key: \"setAlign\",\n    value: function setAlign(align) {\n      this.textAlign = align;\n    }\n  }, {\n    key: \"setCanvasRendering\",\n    value: function setCanvasRendering(value) {\n      this._canvasRendering = value;\n    }\n  }, {\n    key: \"setVerticalOffset\",\n    value: function setVerticalOffset(offset) {\n      this.verticalOffset = offset;\n    }\n  }, {\n    key: \"setHorizontalOffset\",\n    value: function setHorizontalOffset(offset) {\n      this.horizontalOffset = offset;\n    }\n  }]);\n\n  return GuiText;\n}(_gui_element__WEBPACK_IMPORTED_MODULE_0__[\"default\"]);\n\n\n\n//# sourceURL=webpack://okinawa/./src/gui/gui_text.js?");

/***/ }),

/***/ "./src/handlers/fonts.js":
/*!*******************************!*\
  !*** ./src/handlers/fonts.js ***!
  \*******************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return Fonts; });\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar FONTINFO = {\n  FONTOBJECT: 0,\n  ORIGINALPATH: 1\n};\n\nvar Fonts =\n/*#__PURE__*/\nfunction () {\n  function Fonts() {\n    _classCallCheck(this, Fonts);\n\n    // List of Font() objects used in the game, indexed by id/name\n    // fonts[name] = [object, original_path];\n    this.fonts = {};\n  }\n\n  _createClass(Fonts, [{\n    key: \"initialize\",\n    value: function initialize() {\n      // engine.logs.log('engine.fonts.initialize', 'Initializing font Handler');\n      this.fonts.length = 0;\n    }\n  }, {\n    key: \"step\",\n    value: function step() {} // draw(ctx, object)\n    // {\n    // }\n\n  }, {\n    key: \"fontExists\",\n    value: function fontExists(path) {\n      var ids = Object.keys(this.fonts);\n\n      for (var i = 0, len = ids.length; i < len; i++) {\n        if (this.fonts[ids[i]][FONTINFO.ORIGINALPATH] == path) {\n          return true;\n        }\n      }\n\n      return false;\n    }\n  }, {\n    key: \"addFont\",\n    value: function addFont(name, path, object) {\n      this.fonts[name] = [object, path];\n    }\n  }, {\n    key: \"get\",\n    value: function get(name) {\n      if (typeof this.fonts[name] == 'undefined') {\n        return null;\n      }\n\n      return this.fonts[name][FONTINFO.FONTOBJECT];\n    }\n  }]);\n\n  return Fonts;\n}();\n\n\n\n//# sourceURL=webpack://okinawa/./src/handlers/fonts.js?");

/***/ }),

/***/ "./src/handlers/sounds.js":
/*!********************************!*\
  !*** ./src/handlers/sounds.js ***!
  \********************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return Sounds; });\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar SOUNDINFO = {\n  AUDIOOBJECT: 0,\n  ORIGINALPATH: 1\n};\n\nvar Sounds =\n/*#__PURE__*/\nfunction () {\n  function Sounds() {\n    _classCallCheck(this, Sounds);\n\n    // List of Audio() objects used in the game, indexed by id/name\n    // sounds[name] = [object, original_path];\n    this.sounds = {};\n  }\n\n  _createClass(Sounds, [{\n    key: \"initialize\",\n    value: function initialize() {\n      // engine.logs.log('engine.sounds.initialize', 'Initializing sound Handler');\n      this.sounds.length = 0;\n    }\n  }, {\n    key: \"step\",\n    value: function step() {} // draw(ctx, object)\n    // {\n    // }\n\n  }, {\n    key: \"soundExists\",\n    value: function soundExists(path) {\n      var ids = Object.keys(this.sounds);\n\n      for (var i = 0, len = ids.length; i < len; i++) {\n        if (this.sounds[ids[i]][SOUNDINFO.ORIGINALPATH] == path) {\n          return true;\n        }\n      }\n\n      return false;\n    }\n  }, {\n    key: \"addSound\",\n    value: function addSound(name, path, object) {\n      this.sounds[name] = [object, path];\n    }\n  }, {\n    key: \"get\",\n    value: function get(name) {\n      if (typeof this.sounds[name] == 'undefined') {\n        return null;\n      }\n\n      var sound = this.sounds[name][SOUNDINFO.AUDIOOBJECT]; // if already playing, clone the Audio object and use the new copy\n\n      if (sound.currentTime > 0) {\n        sound = sound.cloneNode();\n      }\n\n      return sound;\n    } // Play the sound now\n\n  }, {\n    key: \"play\",\n    value: function play(name) {\n      var sound = this.get(name);\n\n      if (sound !== null) {\n        // Sound already playing\n        if (sound.currentTime > 0) {\n          sound.currentTime = 0;\n        }\n\n        sound.play();\n      }\n    }\n  }]);\n\n  return Sounds;\n}();\n\n\n\n//# sourceURL=webpack://okinawa/./src/handlers/sounds.js?");

/***/ }),

/***/ "./src/handlers/sprites.js":
/*!*********************************!*\
  !*** ./src/handlers/sprites.js ***!
  \*********************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return Sprites; });\n/* harmony import */ var _math_math__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../math/math */ \"./src/math/math.js\");\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n\nvar SPRITEINFO = {\n  PATH: 0,\n  XSTART: 1,\n  YSTART: 2,\n  WIDTH: 3,\n  HEIGTH: 4,\n  FRAMES: 5,\n  INITFRAME: 6,\n  FRAMESPEED: 7\n};\n\nvar Sprites =\n/*#__PURE__*/\nfunction () {\n  function Sprites() {\n    _classCallCheck(this, Sprites);\n\n    // Information related to each sprite, as it was configured in the preloader, indexed by\n    // the sprite id/name\n    // sprites[spriteName] = [imagePath, xStart, yStart, width, height, frames, initFrame, speed]\n    this.sprites = {}; // List of Image() objects used in the game, indexed by original URL\n    // images[path] = object;\n\n    this.images = {};\n  }\n\n  _createClass(Sprites, [{\n    key: \"initialize\",\n    value: function initialize() {\n      // engine.logs.log('engine.sprites.initialize', 'Initializing sprites Handler');\n      this.sprites.length = 0;\n      this.images.length = 0;\n    }\n  }, {\n    key: \"step\",\n    value: function step(dt, object) {\n      var fps = this.sprites[object.spriteName][SPRITEINFO.FRAMESPEED];\n      var frames = this.sprites[object.spriteName][SPRITEINFO.FRAMES];\n      var initFrame = this.sprites[object.spriteName][SPRITEINFO.INITFRAME]; // If the item wants to be rendered at different frame speed\n\n      if (object.forceFrameSpeed !== 0) {\n        fps = object.forceFrameSpeed;\n      } // if frames > 1 -> animation\n\n\n      if (frames > 1) {\n        var now = new Date().getTime(); // If the animation just started\n\n        if (object.timeLastFrame === 0) {\n          object.timeLastFrame = now;\n        } // If time enough has passed to change the currentFrame\n\n\n        if (now - object.timeLastFrame > 1000 / fps) {\n          var preFrame = object.currentFrame;\n          object.currentFrame++;\n\n          if (object.currentFrame >= initFrame + frames) {\n            object.currentFrame = initFrame;\n          }\n\n          object.timeLastFrame = now; // If the animation restarts, increment loop counter\n\n          if (preFrame == frames - 1) {\n            object.numLoops += 1;\n\n            if (typeof object.eventAnimationRestart !== 'undefined') {\n              object.eventAnimationRestart();\n            }\n          }\n        }\n      }\n    }\n  }, {\n    key: \"draw\",\n    value: function draw(ctx, object) {\n      if (object.getVisible() === false) {\n        return;\n      } // sprites[i] -> [imagePath, xStart, yStart, width, height, frames, initFrame, speed]\n\n\n      var image = this.sprites[object.spriteName][SPRITEINFO.PATH];\n      var xStart = this.sprites[object.spriteName][SPRITEINFO.XSTART];\n      var yStart = this.sprites[object.spriteName][SPRITEINFO.YSTART];\n      var width = this.sprites[object.spriteName][SPRITEINFO.WIDTH];\n      var height = this.sprites[object.spriteName][SPRITEINFO.HEIGTH]; // let frames = this.sprites[object.spriteName][SPRITEINFO.FRAMES];\n\n      var position = object.getPosition(); // Set transparency\n\n      ctx.globalAlpha = object.globalAlpha;\n\n      if (object.rotation.getAngle() !== 0) {\n        ctx.save();\n        ctx.translate(position.x, position.y);\n        ctx.rotate(object.rotation.getAngle());\n        ctx.drawImage(this.images[image], xStart + object.currentFrame * width, yStart, width, height, -width / 2 * object.scaling.x, -height / 2 * object.scaling.y, width * object.scaling.x, height * object.scaling.y);\n        ctx.restore();\n      } // Draw without rotation\n      else {\n          ctx.drawImage(this.images[image], xStart + object.currentFrame * width, yStart, width, height, position.x - width / 2 * object.scaling.x, position.y - height / 2 * object.scaling.y, width * object.scaling.x, height * object.scaling.y);\n        } // restore, just in case\n\n\n      ctx.globalAlpha = 1;\n    }\n  }, {\n    key: \"imageExists\",\n    value: function imageExists(path) {\n      return Object.prototype.hasOwnProperty.call(this.images, path); // return this.images.hasOwnProperty(path);\n    }\n  }, {\n    key: \"spriteExists\",\n    value: function spriteExists(name) {\n      return Object.prototype.hasOwnProperty.call(this.sprites, name); // return this.sprites.hasOwnProperty(name);\n    }\n  }, {\n    key: \"addImage\",\n    value: function addImage(path, object) {\n      this.images[path] = object;\n    }\n  }, {\n    key: \"addSprite\",\n    value: function addSprite(name, path, xStart, yStart, width, height, frames, initFrame, speed) {\n      this.sprites[name] = [path, xStart, yStart, width, height, frames, initFrame, speed];\n    } // Returns the object to be painted in the context\n\n  }, {\n    key: \"getImage\",\n    value: function getImage(spriteName) {\n      // this.sprites[spriteName][0] -> full path from the spriteName\n      return this.images[this.sprites[spriteName][SPRITEINFO.PATH]];\n    }\n  }, {\n    key: \"getImageFromPath\",\n    value: function getImageFromPath(path) {\n      return this.images[path];\n    }\n  }, {\n    key: \"getSpriteData\",\n    value: function getSpriteData(spriteName) {\n      var ret = this.sprites[spriteName];\n\n      if (typeof ret !== 'undefined') {\n        return ret;\n      }\n\n      return null;\n    }\n  }, {\n    key: \"getSpriteInfo\",\n    value: function getSpriteInfo(spriteName, value) {\n      var ret = this.sprites[spriteName];\n\n      if (typeof ret !== 'undefined') {\n        var info = ret[value];\n\n        if (typeof info !== 'undefined') {\n          return info;\n        }\n      }\n\n      return null;\n    }\n  }, {\n    key: \"getSpriteSize\",\n    value: function getSpriteSize(spriteName) {\n      var ret = this.sprites[spriteName];\n      var w = 0;\n      var h = 0;\n\n      if (typeof ret !== 'undefined') {\n        w = ret[SPRITEINFO.WIDTH];\n        h = ret[SPRITEINFO.HEIGTH];\n      }\n\n      return new _math_math__WEBPACK_IMPORTED_MODULE_0__[\"Point\"](w, h);\n    }\n  }]);\n\n  return Sprites;\n}();\n\n\n\n//# sourceURL=webpack://okinawa/./src/handlers/sprites.js?");

/***/ }),

/***/ "./src/init.js":
/*!*********************!*\
  !*** ./src/init.js ***!
  \*********************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return init; });\n/* harmony import */ var _engine__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./engine */ \"./src/engine.js\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utils */ \"./src/utils.js\");\n// engine already instanced\n\n\nfunction init(canvasId, gameObject, callbackFunction) {\n  // const engine = new Engine();\n  // Game initialization\n  // parameters:\n  //   1) canvas DOM element id\n  //   2) game object already instantiated\n  //   3) optional callback function to inform of certain events inside the game\n  // check document.readyState: if window is already loaded, the game wouldn't initialize\n  if (document.readyState === 'complete') _engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].initialize(canvasId, gameObject, callbackFunction);else Object(_utils__WEBPACK_IMPORTED_MODULE_1__[\"addEvent\"])('load', window, function () {\n    _engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].initialize(canvasId, gameObject, callbackFunction);\n  });\n  return _engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"];\n}\n\n//# sourceURL=webpack://okinawa/./src/init.js?");

/***/ }),

/***/ "./src/input/controller.js":
/*!*********************************!*\
  !*** ./src/input/controller.js ***!
  \*********************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return Controller; });\n/* harmony import */ var _engine__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../engine */ \"./src/engine.js\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils */ \"./src/utils.js\");\n/* harmony import */ var _input__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./input */ \"./src/input/input.js\");\n/* harmony import */ var _math_math__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../math/math */ \"./src/math/math.js\");\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n\n\n\n\n\nvar Controller =\n/*#__PURE__*/\nfunction () {\n  function Controller() {\n    _classCallCheck(this, Controller);\n\n    // Same as KEYBOARD, but with code:key ordering\n    // Built in the initialize method\n    this.inverseKeyboard = {}; // Object with the keys pressed == true\n\n    this.pressed = {}; // { keyCode : true/false }\n\n    this.lastPressed = []; // list of last pressed key codes\n\n    this.lastPressedTime = new Date().getTime(); // Time when a key was pressed last time\n\n    this.currentInputController = null;\n  }\n\n  _createClass(Controller, [{\n    key: \"initialize\",\n    value: function initialize() {\n      // Build the inverseKeyboard\n      for (var prop in _input__WEBPACK_IMPORTED_MODULE_2__[\"KEYS\"]) {\n        if (Object.prototype.hasOwnProperty.call(_input__WEBPACK_IMPORTED_MODULE_2__[\"KEYS\"], prop)) {\n          // if (KEYS.hasOwnProperty(prop)) {\n          this.inverseKeyboard[_input__WEBPACK_IMPORTED_MODULE_2__[\"KEYS\"][prop]] = prop;\n        }\n      } // Using document instead of window in the key-press events\n      // because old IEs did not implement them in the window object\n\n\n      Object(_utils__WEBPACK_IMPORTED_MODULE_1__[\"addEvent\"])('keyup', document, function (event) {\n        _engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].input.onKeyup(event); // event.preventDefault();\n      });\n      Object(_utils__WEBPACK_IMPORTED_MODULE_1__[\"addEvent\"])('keydown', document, function (event) {\n        _engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].input.onKeydown(event); // don't trap keys if the focus is in a html input (outside the game canvas)\n\n        if (_engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].input.isTargetInput(event)) return;\n        if (_engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].options.preventDefaultKeyStrokes === true || // delete or backspace\n        event.keyCode == 8 || event.keyCode == 46) event.preventDefault();\n      });\n      Object(_utils__WEBPACK_IMPORTED_MODULE_1__[\"addEvent\"])('blur', window, function () {\n        _engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].input.resetKeys(); // Pause the game when we change tab or window\n\n        if (_engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].options.pauseOnWindowChange) {\n          _engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].pauseGame();\n        } // event.preventDefault();\n\n      }); // Capture touch events\n\n      Object(_utils__WEBPACK_IMPORTED_MODULE_1__[\"addEvent\"])('touchstart', _engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].core.canvas, function (event) {\n        _engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].input.onClickStart(event.touches[0].clientX, event.touches[0].clientY); // So touch would work in Android browser\n\n        if (navigator.userAgent.match(/Android/i)) {\n          event.preventDefault();\n        }\n\n        return false;\n      });\n      Object(_utils__WEBPACK_IMPORTED_MODULE_1__[\"addEvent\"])('touchmove', _engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].core.canvas, function (event) {\n        event.preventDefault();\n        return false;\n      });\n      Object(_utils__WEBPACK_IMPORTED_MODULE_1__[\"addEvent\"])('touchend', _engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].core.canvas, function (event) {\n        event.preventDefault();\n        return false;\n      }); // Capture click events\n\n      Object(_utils__WEBPACK_IMPORTED_MODULE_1__[\"addEvent\"])('click', _engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].core.canvas, function (event) {\n        _engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].input.onClickStart(event.clientX, event.clientY);\n        event.preventDefault();\n        return false;\n      });\n      Object(_utils__WEBPACK_IMPORTED_MODULE_1__[\"addEvent\"])('mousedown', _engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].core.canvas, function (event) {\n        event.preventDefault();\n        return false;\n      }); // To avoid selections\n      // document.onselectstart = function() { return false; }\n    }\n  }, {\n    key: \"activate\",\n    value: function activate() {}\n  }, {\n    key: \"getCurrentInputcontroller\",\n    value: function getCurrentInputcontroller() {\n      return this.currentInputController;\n    }\n  }, {\n    key: \"setCurrentInputController\",\n    value: function setCurrentInputController(controller) {\n      this.currentInputController = controller;\n    }\n  }, {\n    key: \"isKeyPressed\",\n    value: function isKeyPressed(keyCode) {\n      return this.pressed[keyCode];\n    }\n  }, {\n    key: \"onKeydown\",\n    value: function onKeydown(event) {\n      // Avoid multiple events when holding keys\n      if (this.pressed[event.keyCode] === true) {\n        return;\n      } // The key is pressed\n\n\n      this.pressed[event.keyCode] = true; // Add to the array of last pressed keys, and update times\n\n      this.addLastPressed(event.keyCode);\n    }\n  }, {\n    key: \"onKeyup\",\n    value: function onKeyup(event) {\n      delete this.pressed[event.keyCode];\n    }\n  }, {\n    key: \"onClickStart\",\n    value: function onClickStart(x, y) {\n      // If the screen is being modified, ignore touch events for safety\n      if (_engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].device.isResizing === true) {\n        return;\n      }\n\n      var position = new _math_math__WEBPACK_IMPORTED_MODULE_3__[\"Point\"](x, y); // let position = new MATH.Point(event.changedTouches[0].pageX, event.changedTouches[0].pageY); // ontouchend\n      // Apply correction if the scroll has moved\n\n      var scroll = _engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].device.getGlobalScroll();\n      position.x += scroll.x;\n      position.y += scroll.y; // engine.logs.log('Engine.INPUT.Controller.onTouchStart', 'Touch in position: ' +position.x+' '+position.y);\n\n      if (position.x < _engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].device.canvasGlobalOffset.x || position.y < _engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].device.canvasGlobalOffset.y || position.x > _engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].device.canvasGlobalOffset.x + _engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].core.canvas.width || position.y > _engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].device.canvasGlobalOffset.y + _engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].core.canvas.height) {// engine.logs.log('Engine.INPUT.Controller.onTouchStart', 'Touch outside the canvas, ignoring');\n        // engine.gui.get('console').addText('touch', 'Pos ' + position.x + ' ' + position.y);\n      } else {\n        position.x -= _engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].device.canvasGlobalOffset.x;\n        position.y -= _engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].device.canvasGlobalOffset.y; // engine.logs.log('Engine.INPUT.Controller.onTouchStart', 'Touch inside the canvas, got it!');\n        // engine.gui.get('console').addText('touch', 'Pos ' + position.x + ' ' + position.y);\n\n        this.currentInputController.detectClick(position);\n      }\n    }\n  }, {\n    key: \"resetKeys\",\n    value: function resetKeys() {\n      for (var key in this.pressed) {\n        this.pressed[key] = false;\n      }\n    }\n  }, {\n    key: \"addLastPressed\",\n    value: function addLastPressed(keyCode) {\n      // Inform to listening objects in the current scene\n      this.currentInputController.informKeyPressed(keyCode);\n      var now = new Date().getTime(); // If a second has passed, clear the pressed keys list\n\n      if (now - this.lastPressedTime > 1000) {\n        this.lastPressed = [];\n      }\n\n      this.lastPressedTime = now;\n      this.lastPressed.push(keyCode); // Only save last 10 elements\n\n      if (this.lastPressed.length > 10) {\n        this.lastPressed.shift();\n      }\n\n      if (_engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].options.outputPressedKeys === true) {\n        _engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].logs.log('Input.addLastPressed', 'Pressed key: ' + this.inverseKeyboard[keyCode], now);\n      } // Inform combo performed to currentInputController if needed\n\n\n      var whichCombo = this.currentInputController.detectCombo();\n\n      if (whichCombo !== null) {\n        this.currentInputController.informComboPerformed(whichCombo, now);\n      }\n    }\n  }, {\n    key: \"addClick\",\n    value: function addClick(id) {\n      this.currentInputController.informClick(id);\n\n      if (_engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].options.outputClicks === true) {\n        _engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].logs.log('Input.addClick', 'Click over: ' + id);\n      }\n    }\n  }, {\n    key: \"getKeyFromCode\",\n    value: function getKeyFromCode(keyCode) {\n      return this.inverseKeyboard[keyCode];\n    }\n  }, {\n    key: \"convertKeyToNumber\",\n    value: function convertKeyToNumber(keyCode) {\n      switch (keyCode) {\n        case _input__WEBPACK_IMPORTED_MODULE_2__[\"KEYS\"].NINE:\n          return 9;\n\n        case _input__WEBPACK_IMPORTED_MODULE_2__[\"KEYS\"].EIGTH:\n          return 8;\n\n        case _input__WEBPACK_IMPORTED_MODULE_2__[\"KEYS\"].SEVEN:\n          return 7;\n\n        case _input__WEBPACK_IMPORTED_MODULE_2__[\"KEYS\"].SIX:\n          return 6;\n\n        case _input__WEBPACK_IMPORTED_MODULE_2__[\"KEYS\"].FIVE:\n          return 5;\n\n        case _input__WEBPACK_IMPORTED_MODULE_2__[\"KEYS\"].FOUR:\n          return 4;\n\n        case _input__WEBPACK_IMPORTED_MODULE_2__[\"KEYS\"].THREE:\n          return 3;\n\n        case _input__WEBPACK_IMPORTED_MODULE_2__[\"KEYS\"].TWO:\n          return 2;\n\n        case _input__WEBPACK_IMPORTED_MODULE_2__[\"KEYS\"].ONE:\n          return 1;\n\n        case _input__WEBPACK_IMPORTED_MODULE_2__[\"KEYS\"].ZERO:\n          return 0;\n\n        default:\n          break;\n      }\n\n      return -1;\n    }\n  }, {\n    key: \"convertNumberToKey\",\n    value: function convertNumberToKey(number) {\n      switch (number) {\n        case 9:\n          return _input__WEBPACK_IMPORTED_MODULE_2__[\"KEYS\"].NINE;\n\n        case 8:\n          return _input__WEBPACK_IMPORTED_MODULE_2__[\"KEYS\"].EIGTH;\n\n        case 7:\n          return _input__WEBPACK_IMPORTED_MODULE_2__[\"KEYS\"].SEVEN;\n\n        case 6:\n          return _input__WEBPACK_IMPORTED_MODULE_2__[\"KEYS\"].SIX;\n\n        case 5:\n          return _input__WEBPACK_IMPORTED_MODULE_2__[\"KEYS\"].FIVE;\n\n        case 4:\n          return _input__WEBPACK_IMPORTED_MODULE_2__[\"KEYS\"].FOUR;\n\n        case 3:\n          return _input__WEBPACK_IMPORTED_MODULE_2__[\"KEYS\"].THREE;\n\n        case 2:\n          return _input__WEBPACK_IMPORTED_MODULE_2__[\"KEYS\"].TWO;\n\n        case 1:\n          return _input__WEBPACK_IMPORTED_MODULE_2__[\"KEYS\"].ONE;\n\n        case 0:\n          return _input__WEBPACK_IMPORTED_MODULE_2__[\"KEYS\"].ZERO;\n\n        default:\n          break;\n      }\n\n      return _input__WEBPACK_IMPORTED_MODULE_2__[\"KEYS\"].ZERO;\n    }\n  }, {\n    key: \"isTargetInput\",\n    value: function isTargetInput(event) {\n      return event.target.type == 'textarea' || event.target.type == 'text' || event.target.type == 'number' || event.target.type == 'email' || event.target.type == 'password' || event.target.type == 'search' || event.target.type == 'tel' || event.target.type == 'url' || event.target.isContentEditable;\n    }\n  }]);\n\n  return Controller;\n}();\n\n\n\n//# sourceURL=webpack://okinawa/./src/input/controller.js?");

/***/ }),

/***/ "./src/input/input.js":
/*!****************************!*\
  !*** ./src/input/input.js ***!
  \****************************/
/*! exports provided: KEYS, COMBO_TYPES, Controller, SceneInput */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"KEYS\", function() { return KEYS; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"COMBO_TYPES\", function() { return COMBO_TYPES; });\n/* harmony import */ var _controller__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./controller */ \"./src/input/controller.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"Controller\", function() { return _controller__WEBPACK_IMPORTED_MODULE_0__[\"default\"]; });\n\n/* harmony import */ var _scene_input__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./scene_input */ \"./src/input/scene_input.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"SceneInput\", function() { return _scene_input__WEBPACK_IMPORTED_MODULE_1__[\"default\"]; });\n\n\n // Keyboard key codes\n\nvar KEYS = {\n  // Engine Control\n  ANY_KEY: -1,\n  // Utils\n  INSERT: 45,\n  DELETE: 46,\n  SPACEBAR: 32,\n  ESC: 27,\n  BACKSPACE: 8,\n  TAB: 9,\n  ENTER: 13,\n  SHIFT: 16,\n  CTRL: 17,\n  ALT: 18,\n  PAUSE: 19,\n  CAPS_LOCK: 20,\n  PAGE_UP: 33,\n  PAGE_DOWN: 34,\n  END: 35,\n  HOME: 36,\n  // Cursors\n  LEFT: 37,\n  UP: 38,\n  RIGHT: 39,\n  DOWN: 40,\n  // Letters\n  A: 65,\n  B: 66,\n  C: 67,\n  D: 68,\n  E: 69,\n  F: 70,\n  G: 71,\n  H: 72,\n  I: 73,\n  J: 74,\n  K: 75,\n  L: 76,\n  M: 77,\n  N: 78,\n  O: 79,\n  P: 80,\n  Q: 81,\n  R: 82,\n  S: 83,\n  T: 84,\n  U: 85,\n  V: 86,\n  W: 87,\n  X: 88,\n  Y: 89,\n  Z: 90,\n  // Numbers\n  ZERO: 48,\n  ONE: 49,\n  TWO: 50,\n  THREE: 51,\n  FOUR: 52,\n  FIVE: 53,\n  SIX: 54,\n  SEVEN: 55,\n  EIGHT: 56,\n  NINE: 57,\n  // Others\n  LEFT_WINDOW_KEY: 91,\n  RIGHT_WINDOW_KEY: 92,\n  SELECT_KEY: 93,\n  NUMPAD_0: 96,\n  NUMPAD_1: 97,\n  NUMPAD_2: 98,\n  NUMPAD_3: 99,\n  NUMPAD_4: 100,\n  NUMPAD_5: 101,\n  NUMPAD_6: 102,\n  NUMPAD_7: 103,\n  NUMPAD_8: 104,\n  NUMPAD_9: 105,\n  MULTIPLY: 106,\n  ADD: 107,\n  SUBTRACT: 109,\n  DECIMAL_POINT: 110,\n  DIVIDE: 111,\n  F1: 112,\n  F2: 113,\n  F3: 114,\n  F4: 115,\n  F5: 116,\n  F6: 117,\n  F7: 118,\n  F8: 119,\n  F9: 120,\n  F10: 121,\n  F11: 122,\n  F12: 123,\n  NUM_LOCK: 144,\n  SCROLL_LOCK: 145,\n  SEMI_COLON: 186,\n  EQUAL_SIGN: 187,\n  COMMA: 188,\n  DASH: 189,\n  PERIOD: 190,\n  FORWARD_SLASH: 191,\n  GRAVE_ACCENT: 192,\n  OPEN_BRACKET: 219,\n  BACK_SLASH: 220,\n  CLOSE_BRAKET: 221,\n  SINGLE_QUOTE: 222,\n  // spanish keyboard\n  NTILDE: 209\n}; // Types of combos\n\nvar COMBO_TYPES = {\n  CONSECUTIVE: 1,\n  // One key after the other\n  SIMULTANEOUS: 2 // Keys pressed at the same time\n\n};\n\n\n//# sourceURL=webpack://okinawa/./src/input/input.js?");

/***/ }),

/***/ "./src/input/scene_input.js":
/*!**********************************!*\
  !*** ./src/input/scene_input.js ***!
  \**********************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return SceneInput; });\n/* harmony import */ var _engine__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../engine */ \"./src/engine.js\");\n/* harmony import */ var _input__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./input */ \"./src/input/input.js\");\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n\n\n\nvar SceneInput =\n/*#__PURE__*/\nfunction () {\n  function SceneInput() {\n    _classCallCheck(this, SceneInput);\n\n    // List of combos to detect\n    // Combos will be defined in the form\n    // combos[comboName] = { comboType: type, comboKeys: [list of keys], lastTime: time }\n    this.combos = {}; // { keyCode : [ list of structures of type\n    //                      {\n    //                          listeningOb:   ob listening to the event,\n    //                          listeningFunc: function to be called inside listeningOb,\n    //                          onPause:       bool, if ob should be informed with the game on pause,\n    //                      }\n    //             ]\n    // }\n\n    this.comboListeners = {};\n    this.keyListeners = {}; // { keyCode : [ list of objects listening to the event ] }\n    // List of clickable zones\n    // clickableZones[zoneName] = {\n    //                  position : x, y of its center,\n    //                  size : x, y (rectangle form),\n    //                  character : character to emulate when it's touched\n    //                        }\n\n    this.clickableZones = {};\n    this.clickListeners = []; // array of elements listening to click events\n  }\n\n  _createClass(SceneInput, [{\n    key: \"initialize\",\n    value: function initialize() {}\n  }, {\n    key: \"activate\",\n    value: function activate() {\n      _engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].input.setCurrentInputController(this); // Always have the common controls\n\n      this.addKeyListener(_engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].core, 'eventKeyPressed', [_input__WEBPACK_IMPORTED_MODULE_1__[\"KEYS\"].P, _input__WEBPACK_IMPORTED_MODULE_1__[\"KEYS\"].ESC, _input__WEBPACK_IMPORTED_MODULE_1__[\"KEYS\"].F], true);\n    } // testLog()\n    // {\n    //   let res = '[';\n    //   for (let j = 0, len_j = this.lastPressed.length; j < len_j; j++)\n    //     res += this.lastPressed[j] + ', ';\n    //   res += ']';\n    //   engine.logs.log('Input.testLog', res);\n    // }\n\n  }, {\n    key: \"addKeyListener\",\n    value: function addKeyListener(object, funcName, keyList, onPause) {\n      if (typeof onPause == 'undefined') {\n        onPause = false;\n      }\n\n      var element = {};\n      element['listeningOb'] = object;\n      element['listeningFunc'] = funcName;\n      element['onPause'] = onPause;\n\n      for (var i = 0, len = keyList.length; i < len; i++) {\n        if (typeof this.keyListeners[keyList[i]] === 'undefined') {\n          this.keyListeners[keyList[i]] = [element];\n        } else {\n          this.keyListeners[keyList[i]].push(element);\n        }\n      }\n    }\n  }, {\n    key: \"addClickListener\",\n    value: function addClickListener(object, funcName, onPause) {\n      if (typeof onPause === 'undefined') {\n        onPause = false;\n      }\n\n      var element = {};\n      element['listeningOb'] = object;\n      element['listeningFunc'] = funcName;\n      element['onPause'] = onPause;\n      this.clickListeners.push(element);\n    }\n  }, {\n    key: \"removeListeners\",\n    value: function removeListeners(obj) {\n      var i, j, len_i, len_j;\n\n      for (i in this.keyListeners) {\n        for (j = 0, len_j = this.keyListeners[i].length; j < len_j; j++) {\n          if (this.keyListeners[i][j].listeningOb == obj) {\n            this.keyListeners[i].splice(j, 1);\n\n            if (!this.keyListeners[i].length) {\n              delete this.keyListeners[i];\n            }\n          }\n        }\n      }\n\n      for (i = 0, len_i = this.clickListeners.length; i < len_i; i++) {\n        for (j = 0, len_j = this.clickListeners[i].length; j < len_j; j++) {\n          if (this.clickListeners[i][j].listeningOb == obj) {\n            this.clickListeners[i].splice(j, 1);\n          }\n        }\n      }\n    }\n  }, {\n    key: \"informKeyPressed\",\n    value: function informKeyPressed(keyCode) {\n      var listeners = []; // Objects listening to the actual key pressed\n\n      if (typeof this.keyListeners[keyCode] != 'undefined') {\n        listeners = listeners.concat(this.keyListeners[keyCode]);\n      } // Objects listening to ANY key pressed\n\n\n      if (typeof this.keyListeners[_input__WEBPACK_IMPORTED_MODULE_1__[\"KEYS\"].ANY_KEY] != 'undefined') {\n        listeners = listeners.concat(this.keyListeners[_input__WEBPACK_IMPORTED_MODULE_1__[\"KEYS\"].ANY_KEY]);\n      }\n\n      if (typeof listeners == 'undefined') {\n        return;\n      }\n\n      for (var i = 0, len = listeners.length; i < len; i++) {\n        var which = listeners[i]; // If the listening object should not be informed on pause\n\n        if (!which.onPause && _engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].paused) {\n          continue;\n        } // If the object has the function, inform\n\n\n        if (typeof which.listeningOb[which.listeningFunc] != 'undefined') {\n          which.listeningOb[which.listeningFunc](keyCode);\n        }\n      }\n    }\n  }, {\n    key: \"informClick\",\n    value: function informClick(id) {\n      if (typeof this.clickListeners === 'undefined') {\n        return;\n      }\n\n      for (var i = 0, len = this.clickListeners.length; i < len; i++) {\n        var which = this.clickListeners[i]; // If the listening object should not be informed on pause\n\n        if (!which.onPause && _engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].paused) {\n          continue;\n        } // If the object has the function, inform\n\n\n        if (typeof which.listeningOb[which.listeningFunc] !== 'undefined') {\n          which.listeningOb[which.listeningFunc](id);\n        }\n      }\n    }\n  }, {\n    key: \"defineCombo\",\n    value: function defineCombo(name, type, list) {\n      this.combos[name] = {\n        comboType: type,\n        comboKeys: list,\n        lastTime: 0\n      };\n    }\n  }, {\n    key: \"addComboListener\",\n    value: function addComboListener(object, funcName, comboNames, onPause) {\n      if (typeof onPause === 'undefined') {\n        onPause = false;\n      }\n\n      var element = [];\n      element['listeningOb'] = object;\n      element['listeningFunc'] = funcName;\n      element['onPause'] = onPause;\n\n      for (var i = 0, len = comboNames.length; i < len; i++) {\n        if (typeof this.comboListeners[comboNames[i]] === 'undefined') {\n          this.comboListeners[comboNames[i]] = [element];\n        } else {\n          this.comboListeners[comboNames[i]].push(element);\n        }\n      }\n    }\n  }, {\n    key: \"informComboPerformed\",\n    value: function informComboPerformed(comboName, time) {\n      if (_engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].options.outputPressedCombos === true) {\n        _engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].logs.log('Input.informComboPerformed', 'Combo activated: ' + comboName, time);\n      } // Update last time performed\n\n\n      this.combos[comboName].lastTime = time;\n      var listeners = this.comboListeners[comboName];\n\n      if (typeof listeners === 'undefined') {\n        return;\n      }\n\n      for (var i = 0, len = listeners.length; i < len; i++) {\n        var which = listeners[i]; // If the listening object should not be informed on pause\n\n        if (!which.onPause && _engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].paused) {\n          continue;\n        } // If the object has the function, inform\n\n\n        if (typeof which.listeningOb[which.listeningFunc] !== 'undefined') {\n          which.listeningOb[which.listeningFunc](comboName);\n        }\n      } // Control of combo result should be done in Controls.informComboPerformed\n\n\n      return;\n    }\n  }, {\n    key: \"detectCombo\",\n    value: function detectCombo() {\n      for (var comboName in this.combos) {\n        var combo = this.combos[comboName];\n        var j = void 0,\n            len_j = void 0; // All the keys pressed at the same time\n\n        if (combo.comboType == _input__WEBPACK_IMPORTED_MODULE_1__[\"COMBO_TYPES\"].SIMULTANEOUS) {\n          for (j = 0, len_j = combo.comboKeys.length; j < len_j; j++) {\n            // Any of the keys is not pressed, combo failed\n            if (!_engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].input.isKeyPressed(combo.comboKeys[j])) {\n              break;\n            } // All pressed, this is the last one and it's also pressed, combo win!\n\n\n            if (j == len_j - 1 && _engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].input.isKeyPressed(combo.comboKeys[j])) {\n              return comboName;\n            }\n          }\n        } // Keys pressed in a consecutive way\n        else if (combo.comboType == _input__WEBPACK_IMPORTED_MODULE_1__[\"COMBO_TYPES\"].CONSECUTIVE) {\n            var lp_len = _engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].input.lastPressed.length;\n            var ck_len = combo.comboKeys.length; // If pressed list shorter than combo\n\n            if (lp_len < ck_len) {\n              return null;\n            }\n\n            for (j = 1; j <= ck_len && j <= lp_len; j++) {\n              // Non-match\n              if (combo.comboKeys[ck_len - j] != _engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].input.lastPressed[lp_len - j]) {\n                break;\n              } // Last element and everyone match\n\n\n              if (j >= ck_len || j >= lp_len) {\n                return comboName;\n              }\n            }\n          }\n      } // No combos found\n\n\n      return null;\n    }\n  }, {\n    key: \"addClickZone\",\n    value: function addClickZone(id, location, rectangleSize, ch) {\n      this.clickableZones[id] = {\n        position: location,\n        size: rectangleSize,\n        character: ch\n      };\n    }\n  }, {\n    key: \"detectClick\",\n    value: function detectClick(position) {\n      for (var clickId in this.clickableZones) {\n        var clickZone = this.clickableZones[clickId]; // engine.logs.log('Engine.INPUT.SceneInput.detectTouch', 'Testing ' + clickId + ' zone');\n\n        if (position.x >= clickZone.position.x - clickZone.size.x / 2 && position.x <= clickZone.position.x + clickZone.size.x / 2 && position.y >= clickZone.position.y - clickZone.size.y / 2 && position.y <= clickZone.position.y + clickZone.size.y / 2) {\n          // Touch done!\n          // engine.logs.log('Engine.INPUT.SceneInput.detectTouch', 'Touch OK, zone: ' + clickId);\n          // engine.gui.get('console').addText('touch', clickId);\n          // Save the emulated key\n          if (clickZone.character !== null) {\n            _engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].input.addLastPressed(clickZone.character);\n          }\n\n          _engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].input.addClick(clickId);\n        }\n      }\n    }\n  }]);\n\n  return SceneInput;\n}();\n\n\n\n//# sourceURL=webpack://okinawa/./src/input/scene_input.js?");

/***/ }),

/***/ "./src/item.js":
/*!*********************!*\
  !*** ./src/item.js ***!
  \*********************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return Item; });\n/* harmony import */ var _engine__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./engine */ \"./src/engine.js\");\n/* harmony import */ var _math_math__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./math/math */ \"./src/math/math.js\");\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n/*\n *  Base object\n *  Everything on screen should inherit from here\n */\n\n\n\nvar Item =\n/*#__PURE__*/\nfunction () {\n  function Item() {\n    _classCallCheck(this, Item);\n\n    this.spriteName = null; // If false, will not be rendered by the spriteHandler\n\n    this._visible = true;\n    this.position = new _math_math__WEBPACK_IMPORTED_MODULE_1__[\"Point\"]();\n    this.size = new _math_math__WEBPACK_IMPORTED_MODULE_1__[\"Point\"]();\n    this.scaling = new _math_math__WEBPACK_IMPORTED_MODULE_1__[\"Point\"](1, 1);\n    this.speed = new _math_math__WEBPACK_IMPORTED_MODULE_1__[\"Point\"]();\n    this.maxVel = 0; // maximum speed\n\n    this.accel = 0; // acceleration\n\n    this.vRot = 0; // rotation speed\n\n    this.maxVRot = 0; // max rotation speed\n\n    this.accelRot = 0; // rotation accel\n\n    this.rotation = new _math_math__WEBPACK_IMPORTED_MODULE_1__[\"Rotation\"]();\n    this.globalAlpha = 1;\n    this.maxRadius = 0; // object radius\n\n    this.collisionRadius = 0; // smaller radius for collsions\n    // If isAnimated == true, the object itself would call the spriteHandler to ask\n    // for its new frame, etc\n\n    this.isAnimated = false;\n    this.currentFrame = 0; // for animations\n    // this.numFrames       = 1;\n\n    this.numLoops = 1; // times the animation has been repeated\n    // for animations (last time when frame changed)\n\n    this.forceFrameSpeed = 0; // 0 == spriteHandler will use default animation speed\n\n    this.timeLastFrame = 0; // new Date().getTime();\n    // Object hierarchy on the screen\n\n    this._attachedItems = []; // objects attached to current position\n\n    this._removedItems = []; // objects to be removed at the end of step()\n\n    this._parent = null; // object this item is attached to\n  }\n\n  _createClass(Item, [{\n    key: \"initialize\",\n    value: function initialize() {}\n  }, {\n    key: \"activate\",\n    value: function activate() {\n      for (var i = 0, len = this._attachedItems.length; i < len; i++) {\n        var what = this._attachedItems[i];\n        what.activate();\n      }\n    }\n  }, {\n    key: \"getVisible\",\n    value: function getVisible() {\n      return this._visible;\n    }\n  }, {\n    key: \"setVisible\",\n    value: function setVisible(value) {\n      this._visible = value;\n    }\n  }, {\n    key: \"getParent\",\n    value: function getParent() {\n      return this._parent;\n    }\n  }, {\n    key: \"setParent\",\n    value: function setParent(parent) {\n      this._parent = parent;\n    }\n  }, {\n    key: \"getParentScene\",\n    value: function getParentScene() {\n      var p = this;\n\n      while (p.getParent() !== null) {\n        p = p.getParent();\n      }\n\n      return p;\n    }\n  }, {\n    key: \"getAttachedItems\",\n    value: function getAttachedItems() {\n      return this._attachedItems;\n    }\n  }, {\n    key: \"attachItem\",\n    value: function attachItem(what) {\n      // this._attachedItems[this._attachedItems.length] = what;\n      this._attachedItems.push(what);\n\n      what.setParent(this);\n    }\n  }, {\n    key: \"detachItem\",\n    value: function detachItem(what) {\n      var scene = this.getParentScene(); // stop listening to input events\n\n      scene.input.removeListeners(what);\n      var list = what.children();\n\n      for (var i = 0, len = list.length; i < len; i++) {\n        scene.input.removeListeners(list[i]);\n      }\n\n      this._removedItems.push(what);\n\n      what.setParent(null); // delete this.items[index]; // mark the position as undefined, does not change the array size\n      // this.items.splice(index, 1);\n    }\n  }, {\n    key: \"detachAllItems\",\n    value: function detachAllItems() {\n      for (var i = 0, len = this._attachedItems.length; i < len; i++) {\n        var what = this._attachedItems[i]; // recursive !!\n\n        what.detachAllItems(); // what._finalizeRemoved();\n\n        this.detachItem(what);\n      }\n\n      this._finalizeRemoved();\n    }\n  }, {\n    key: \"children\",\n    value: function children() {\n      var chs = [];\n\n      for (var i = 0, len = this._attachedItems.length; i < len; i++) {\n        chs = chs.concat(this._attachedItems[i]);\n        chs = chs.concat(this._attachedItems[i].children());\n      }\n\n      return chs;\n    }\n  }, {\n    key: \"_resetItems\",\n    value: function _resetItems() {\n      this._attachedItems.length = 0;\n    } // Reset the list of removed items\n\n  }, {\n    key: \"_resetRemoved\",\n    value: function _resetRemoved() {\n      this._removedItems.length = 0;\n    } // Remove any items marked for removal\n\n  }, {\n    key: \"_finalizeRemoved\",\n    value: function _finalizeRemoved() {\n      for (var i = 0, len = this._removedItems.length; i < len; i++) {\n        var what = this._removedItems[i];\n\n        var idx = this._attachedItems.indexOf(what);\n\n        if (idx != -1) {\n          // what.detachAllItems();\n          this._attachedItems.splice(idx, 1);\n        }\n      } // Reset the list of removed objects\n\n\n      this._resetRemoved();\n    }\n  }, {\n    key: \"setImage\",\n    value: function setImage(spriteName) {\n      this.spriteName = spriteName;\n      this.size = _engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].sprites.getSpriteSize(spriteName);\n    }\n  }, {\n    key: \"getOrigin\",\n    value: function getOrigin() {\n      var center = this.getPosition();\n      return new _math_math__WEBPACK_IMPORTED_MODULE_1__[\"Point\"](center.x - this.size.x / 2, center.y - this.size.y / 2);\n    }\n  }, {\n    key: \"getPosition\",\n    value: function getPosition() {\n      var result = new _math_math__WEBPACK_IMPORTED_MODULE_1__[\"Point\"]();\n      var parentPosition = new _math_math__WEBPACK_IMPORTED_MODULE_1__[\"Point\"]();\n      var transformedPosition = new _math_math__WEBPACK_IMPORTED_MODULE_1__[\"Point\"]();\n\n      if (this._parent !== null) {\n        parentPosition = this._parent.getPosition();\n        transformedPosition = this._parent.rotation.transformPosition(this.position);\n        result.x = transformedPosition.x + parentPosition.x;\n        result.y = transformedPosition.y + parentPosition.y;\n      } else {\n        result.x = this.position.x;\n        result.y = this.position.y;\n      }\n\n      return result;\n    }\n  }, {\n    key: \"setPosition\",\n    value: function setPosition(x, y) {\n      this.position.x = x;\n      this.position.y = y;\n    }\n  }, {\n    key: \"getSize\",\n    value: function getSize() {\n      return this.size;\n    }\n  }, {\n    key: \"setSize\",\n    value: function setSize(x, y) {\n      this.size.x = x;\n      this.size.y = y;\n    }\n  }, {\n    key: \"getScaling\",\n    value: function getScaling() {\n      return this.scaling;\n    }\n  }, {\n    key: \"setScaling\",\n    value: function setScaling(x, y) {\n      this.scaling.x = x;\n      this.scaling.y = y;\n    }\n  }, {\n    key: \"getSpeed\",\n    value: function getSpeed() {\n      return this.speed;\n    }\n  }, {\n    key: \"setSpeed\",\n    value: function setSpeed(x, y) {\n      this.speed.x = x;\n      this.speed.y = y;\n    }\n  }, {\n    key: \"getParentPosition\",\n    value: function getParentPosition() {\n      if (this._parent !== null) {\n        return this._parent.getPosition();\n      } else {\n        return new _math_math__WEBPACK_IMPORTED_MODULE_1__[\"Point\"]();\n      }\n    }\n  }, {\n    key: \"getParentSpeed\",\n    value: function getParentSpeed() {\n      if (this._parent !== null) {\n        return this._parent.getSpeed();\n      } else {\n        return new _math_math__WEBPACK_IMPORTED_MODULE_1__[\"Point\"]();\n      }\n    }\n  }, {\n    key: \"getRadius\",\n    value: function getRadius() {\n      return Math.sqrt(Math.pow(this.size.x / 2, 2) + Math.pow(this.size.y / 2, 2));\n    }\n  }, {\n    key: \"getMagnitude\",\n    value: function getMagnitude() {\n      return Math.sqrt(this.speed.x * this.speed.x + this.speed.y * this.speed.y);\n    }\n  }, {\n    key: \"move\",\n    value: function move(dx, dy) {\n      this.position.x += dx;\n      this.position.y += dy;\n    }\n  }, {\n    key: \"rotate\",\n    value: function rotate(dRot) {\n      this.rotation.rotate(dRot);\n    }\n  }, {\n    key: \"setRotation\",\n    value: function setRotation(rot) {\n      this.rotation.update(rot);\n    }\n  }, {\n    key: \"getRotation\",\n    value: function getRotation() {\n      if (this._parent !== null) {\n        return this.rotation.getAngle() + this._parent.getRotation();\n      } else {\n        return this.rotation.getAngle();\n      }\n    }\n  }, {\n    key: \"draw\",\n    value: function draw(ctx) {\n      if (this._visible === true) {\n        for (var i = 0, len = this._attachedItems.length; i < len; i++) {\n          this._attachedItems[i].draw(ctx);\n        }\n\n        if (this.spriteName !== null) {\n          _engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].sprites.draw(ctx, this);\n        }\n\n        if (_engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].options.drawBoundingBoxes === true) {\n          this.drawHelper(ctx, 'spriteBox');\n        }\n\n        if (_engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].options.drawMaxRadius === true) {\n          this.drawHelper(ctx, 'maxRadius');\n        }\n\n        if (_engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].options.drawCollisionRadius === true) {\n          this.drawHelper(ctx, 'collisionRadius');\n        }\n\n        if (_engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].options.drawOrigins === true) {\n          this.drawHelper(ctx, 'origin');\n        }\n\n        if (_engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].options.drawCenters === true) {\n          this.drawHelper(ctx, 'center');\n        }\n\n        if (_engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].options.drawDirectionVectors === true) {\n          this.drawHelper(ctx, 'direction');\n        }\n      }\n    }\n  }, {\n    key: \"step\",\n    value: function step(dt) {\n      if (this.speed.x !== 0 || this.speed.y !== 0) this.move(this.speed.x * dt / _engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].core.TIME_PER_FRAME, this.speed.y * dt / _engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].core.TIME_PER_FRAME);\n\n      if (this.vRot !== 0) {\n        this.rotate(this.vRot * dt / _engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].core.TIME_PER_FRAME);\n      } // Advance the necessary frames in the animation if needed\n\n\n      if (this.isAnimated === true && this.spriteName !== null) {\n        _engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].sprites.step(dt, this);\n      }\n\n      for (var i = 0, len = this._attachedItems.length; i < len; i++) {\n        this._attachedItems[i].step(dt);\n      } // Remove any objects marked for removal\n\n\n      this._finalizeRemoved();\n    }\n  }, {\n    key: \"eventAnimationRestart\",\n    value: function eventAnimationRestart() {}\n  }, {\n    key: \"drawHelper\",\n    value: function drawHelper(ctx, what) {\n      var pos = this.getPosition();\n      var size = this.getSize();\n      var scale = this.getScaling(); // Draw the collisionRadius\n\n      if ('maxRadius' == what) {\n        ctx.beginPath();\n        ctx.arc(pos.x, pos.y, this.maxRadius, 0, 2 * Math.PI, false);\n        ctx.closePath();\n        ctx.lineWidth = 1;\n        ctx.strokeStyle = '#FF0000';\n        ctx.stroke();\n      } else if ('collisionRadius' == what) {\n        ctx.beginPath();\n        ctx.arc(pos.x, pos.y, this.collisionRadius, 0, 2 * Math.PI, false);\n        ctx.closePath();\n        ctx.lineWidth = 1;\n        ctx.strokeStyle = '#FF0000';\n        ctx.stroke();\n      } // Draw the origin\n      else if ('origin' == what) {\n          ctx.fillStyle = '#FF0000';\n          ctx.fillRect(pos.x - size.x / 2 * scale.x, pos.y - size.y / 2 * scale.y, 2, 2);\n        } else if ('center' == what) {\n          ctx.fillStyle = '#FF0000';\n          ctx.fillRect(pos.x, pos.y, 2, 2);\n        } else if ('spriteBox' == what) {\n          ctx.lineWidth = 1;\n          ctx.strokeStyle = '#FF0000';\n          ctx.strokeRect(pos.x - size.x / 2 * scale.x, pos.y - size.y / 2 * scale.y, size.x * scale.x, size.y * scale.y);\n        } else if ('direction' == what) {\n          var speed = this.getSpeed();\n          ctx.lineWidth = 1;\n          ctx.strokeStyle = '#FF0000';\n          ctx.beginPath();\n          ctx.moveTo(pos.x, pos.y);\n          ctx.lineTo(pos.x + speed.x * 10, pos.y + speed.y * 10);\n          ctx.stroke();\n        }\n    } // By default, when an item collides, it is deleted\n    // Objects which inherit from Item must implement their own collide method\n\n  }, {\n    key: \"collide\",\n    value: function collide() {\n      // Delete the attached items\n      this.detachAllItems(); // true if object should be removed, false otherwise\n\n      return true;\n    }\n  }]);\n\n  return Item;\n}();\n\n\n\n//# sourceURL=webpack://okinawa/./src/item.js?");

/***/ }),

/***/ "./src/localization/localization.js":
/*!******************************************!*\
  !*** ./src/localization/localization.js ***!
  \******************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return Localization; });\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar Localization =\n/*#__PURE__*/\nfunction () {\n  function Localization() {\n    _classCallCheck(this, Localization);\n\n    this.fallbackLanguage = 'english';\n    this.selectedLanguage = '';\n    this.stringTables = {};\n    this.baseTexts = {\n      english: {\n        paused: 'Paused, press P to continue',\n        loaded: 'Loading',\n        items: 'items',\n        effects: 'effects',\n        particles: 'particles',\n        choose_language: 'Choose language',\n        english: 'English',\n        spanish: 'Spanish'\n      },\n      spanish: {\n        paused: 'Pausa, pulsa P para continuar',\n        loaded: 'Cargando',\n        items: 'elementos',\n        effects: 'efectos',\n        particles: 'partículas',\n        choose_language: 'Escoge el idioma',\n        english: 'English',\n        spanish: 'Español'\n      }\n    };\n  }\n\n  _createClass(Localization, [{\n    key: \"initialize\",\n    value: function initialize() {\n      // engine.logs.log('localization.initialize', 'Initializing localization handler');\n      // initial lenguage\n      this.selectedLanguage = 'english';\n\n      for (var lang in this.baseTexts) {\n        this.stringTables[lang] = [];\n        this.addTextsToStringTable(lang, this.baseTexts[lang]);\n      } // engine.controls.addKeyListener( this, 'eventKeyPressed', [Engine.INPUT.KEYS.L, ] ); // change language\n\n    } // eventKeyPressed(keyCode)\n    // {\n    //   engine.logs.log('Localization::eventKeyPressed', 'Key Pressed: ' + keyCode);\n    //   if (keyCode == KEYBOARD.L)\n    //   {\n    //     if (this.selectedLanguage == 'spanish')\n    //       this.selectLanguage('english');\n    //     else\n    //       this.selectLanguage('spanish');\n    //   }\n    // }\n\n  }, {\n    key: \"get\",\n    value: function get(stringId) {\n      var text = this.stringTables[this.selectedLanguage][stringId];\n\n      if (typeof text !== 'undefined') {\n        return text;\n      } else {\n        return this.stringTables[this.fallbackLanguage][stringId];\n      }\n    }\n  }, {\n    key: \"addStringTable\",\n    value: function addStringTable(language, table) {\n      this.stringTables[language] = table;\n    }\n  }, {\n    key: \"setBaseTexts\",\n    value: function setBaseTexts(table) {\n      this.baseTexts = table;\n    }\n  }, {\n    key: \"addTextsToStringTable\",\n    value: function addTextsToStringTable(language, table) {\n      for (var prop in table) {\n        this.stringTables[language][prop] = table[prop];\n      }\n    }\n  }, {\n    key: \"selectLanguage\",\n    value: function selectLanguage(language) {\n      this.selectedLanguage = language;\n    }\n  }]);\n\n  return Localization;\n}();\n\n\n\n//# sourceURL=webpack://okinawa/./src/localization/localization.js?");

/***/ }),

/***/ "./src/logs.js":
/*!*********************!*\
  !*** ./src/logs.js ***!
  \*********************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return Logs; });\n/* harmony import */ var _engine__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./engine */ \"./src/engine.js\");\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n\n\nvar Logs =\n/*#__PURE__*/\nfunction () {\n  function Logs() {\n    _classCallCheck(this, Logs);\n  }\n\n  _createClass(Logs, [{\n    key: \"log\",\n    value: function log(fileName, message, object) {\n      var result = [];\n\n      if (_engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].options.debugInConsole === false) {\n        return;\n      }\n\n      if (_engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].options.debugFunctionNames === true) {\n        result.push(fileName);\n      }\n\n      if (Array.isArray(message)) {\n        result.push(message.join(' '));\n      } else {\n        result.push(message);\n      }\n\n      if (object) {\n        result.push(object);\n      }\n\n      if (_engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].options.debugInHtml === true && _engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].core.canvas !== undefined) {\n        var e = document.createElement('div');\n        e.innerHTML = result;\n        _engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].core.canvas.parentNode.appendChild(e);\n      } // Old IE, console is not initialized by default\n      else if (typeof window.console === 'undefined' || typeof window.console.log === 'undefined') {// Do nothing?\n        } else {\n          window.console.log(result);\n        }\n    }\n  }]);\n\n  return Logs;\n}();\n\n\n\n//# sourceURL=webpack://okinawa/./src/logs.js?");

/***/ }),

/***/ "./src/math/math.js":
/*!**************************!*\
  !*** ./src/math/math.js ***!
  \**************************/
/*! exports provided: pointDistance, angleToDirectionVector, Point, Rotation */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"pointDistance\", function() { return pointDistance; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"angleToDirectionVector\", function() { return angleToDirectionVector; });\n/* harmony import */ var _point__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./point */ \"./src/math/point.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"Point\", function() { return _point__WEBPACK_IMPORTED_MODULE_0__[\"default\"]; });\n\n/* harmony import */ var _rotation__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./rotation */ \"./src/math/rotation.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"Rotation\", function() { return _rotation__WEBPACK_IMPORTED_MODULE_1__[\"default\"]; });\n\n// mathematical and graphical auxiliar\n// functions that have no other place to be ;)\n\n // Distance between two Engine.MATH.Point objects\n\nfunction pointDistance(origin, destination) {\n  if (typeof destination.x == 'undefined' || typeof destination.y == 'undefined' || typeof origin.x == 'undefined' || typeof origin.y == 'undefined') {\n    return -1;\n  }\n\n  return Math.sqrt(Math.pow(destination.x - origin.x, 2) + Math.pow(destination.y - origin.y, 2));\n}\n\nfunction angleToDirectionVector(angle) {\n  var result = new _point__WEBPACK_IMPORTED_MODULE_0__[\"default\"]();\n  result.x = Math.cos(angle);\n  result.y = Math.sin(angle);\n  return result;\n}\n\n\n\n//# sourceURL=webpack://okinawa/./src/math/math.js?");

/***/ }),

/***/ "./src/math/point.js":
/*!***************************!*\
  !*** ./src/math/point.js ***!
  \***************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return Point; });\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar Point =\n/*#__PURE__*/\nfunction () {\n  function Point(a, b) {\n    _classCallCheck(this, Point);\n\n    if ('undefined' === typeof a) {\n      this.x = 0;\n    } else {\n      this.x = a;\n    }\n\n    if ('undefined' === typeof b) {\n      this.y = 0;\n    } else {\n      this.y = b;\n    }\n  }\n\n  _createClass(Point, [{\n    key: \"magnitude\",\n    value: function magnitude() {\n      return Math.sqrt(this.x * this.x + this.y * this.y);\n    }\n  }, {\n    key: \"normalize\",\n    value: function normalize() {\n      var magnitude = this.magnitude();\n      return new Point(this.x / magnitude, this.y / magnitude);\n    }\n  }, {\n    key: \"equals\",\n    value: function equals(p) {\n      if (p instanceof Point === false) {\n        return false;\n      }\n\n      return this.x == p.x && this.y == p.y;\n    }\n  }]);\n\n  return Point;\n}();\n\n\n\n//# sourceURL=webpack://okinawa/./src/math/point.js?");

/***/ }),

/***/ "./src/math/rotation.js":
/*!******************************!*\
  !*** ./src/math/rotation.js ***!
  \******************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return Rotation; });\n/* harmony import */ var _point__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./point */ \"./src/math/point.js\");\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n// Rotation matrix =\n//   | cos(r)  -sin(r) |\n//   | sin(r)   cos(r) |\n// Inner representation for fast access\n//   | a b |\n//   | c d |\n\n\nvar Rotation =\n/*#__PURE__*/\nfunction () {\n  function Rotation() {\n    _classCallCheck(this, Rotation);\n\n    this.angle = 0; // Matrix for zero degrees rotation\n\n    this.a = 1;\n    this.b = 0;\n    this.c = 0;\n    this.d = 1;\n  }\n\n  _createClass(Rotation, [{\n    key: \"getAngle\",\n    value: function getAngle() {\n      return this.angle;\n    }\n  }, {\n    key: \"rotate\",\n    value: function rotate(dRot) {\n      this.update(this.angle + dRot);\n    }\n  }, {\n    key: \"update\",\n    value: function update(newAngle) {\n      this.angle = newAngle;\n      this.a = Math.cos(this.angle);\n      this.b = -Math.sin(this.angle);\n      this.c = Math.sin(this.angle);\n      this.d = Math.cos(this.angle);\n    }\n  }, {\n    key: \"transformPosition\",\n    value: function transformPosition(point) {\n      return new _point__WEBPACK_IMPORTED_MODULE_0__[\"default\"](point.x * this.a + point.y * this.b, point.x * this.c + point.y * this.d);\n    }\n  }]);\n\n  return Rotation;\n}();\n\n\n\n//# sourceURL=webpack://okinawa/./src/math/rotation.js?");

/***/ }),

/***/ "./src/okinawa.js":
/*!************************!*\
  !*** ./src/okinawa.js ***!
  \************************/
/*! exports provided: Options, Logs, Core, Device, Clock, Localization, Effects, Particles, Emitter, Sprites, Sounds, Fonts, Scene, Background, Preloader, Player, Item, INPUT, GUI, MATH, engine, init */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _options__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./options */ \"./src/options.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"Options\", function() { return _options__WEBPACK_IMPORTED_MODULE_0__[\"default\"]; });\n\n/* harmony import */ var _logs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./logs */ \"./src/logs.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"Logs\", function() { return _logs__WEBPACK_IMPORTED_MODULE_1__[\"default\"]; });\n\n/* harmony import */ var _core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./core */ \"./src/core.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"Core\", function() { return _core__WEBPACK_IMPORTED_MODULE_2__[\"default\"]; });\n\n/* harmony import */ var _device__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./device */ \"./src/device.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"Device\", function() { return _device__WEBPACK_IMPORTED_MODULE_3__[\"default\"]; });\n\n/* harmony import */ var _clocks_clock__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./clocks/clock */ \"./src/clocks/clock.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"Clock\", function() { return _clocks_clock__WEBPACK_IMPORTED_MODULE_4__[\"default\"]; });\n\n/* harmony import */ var _localization_localization__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./localization/localization */ \"./src/localization/localization.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"Localization\", function() { return _localization_localization__WEBPACK_IMPORTED_MODULE_5__[\"default\"]; });\n\n/* harmony import */ var _effects_effects__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./effects/effects */ \"./src/effects/effects.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"Effects\", function() { return _effects_effects__WEBPACK_IMPORTED_MODULE_6__[\"default\"]; });\n\n/* harmony import */ var _effects_particles__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./effects/particles */ \"./src/effects/particles.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"Particles\", function() { return _effects_particles__WEBPACK_IMPORTED_MODULE_7__[\"default\"]; });\n\n/* harmony import */ var _effects_emitter__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./effects/emitter */ \"./src/effects/emitter.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"Emitter\", function() { return _effects_emitter__WEBPACK_IMPORTED_MODULE_8__[\"default\"]; });\n\n/* harmony import */ var _handlers_sprites__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./handlers/sprites */ \"./src/handlers/sprites.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"Sprites\", function() { return _handlers_sprites__WEBPACK_IMPORTED_MODULE_9__[\"default\"]; });\n\n/* harmony import */ var _handlers_sounds__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./handlers/sounds */ \"./src/handlers/sounds.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"Sounds\", function() { return _handlers_sounds__WEBPACK_IMPORTED_MODULE_10__[\"default\"]; });\n\n/* harmony import */ var _handlers_fonts__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./handlers/fonts */ \"./src/handlers/fonts.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"Fonts\", function() { return _handlers_fonts__WEBPACK_IMPORTED_MODULE_11__[\"default\"]; });\n\n/* harmony import */ var _scenes_scene__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./scenes/scene */ \"./src/scenes/scene.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"Scene\", function() { return _scenes_scene__WEBPACK_IMPORTED_MODULE_12__[\"default\"]; });\n\n/* harmony import */ var _scenes_background__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./scenes/background */ \"./src/scenes/background.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"Background\", function() { return _scenes_background__WEBPACK_IMPORTED_MODULE_13__[\"default\"]; });\n\n/* harmony import */ var _scenes_preloader__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./scenes/preloader */ \"./src/scenes/preloader.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"Preloader\", function() { return _scenes_preloader__WEBPACK_IMPORTED_MODULE_14__[\"default\"]; });\n\n/* harmony import */ var _player__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./player */ \"./src/player.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"Player\", function() { return _player__WEBPACK_IMPORTED_MODULE_15__[\"default\"]; });\n\n/* harmony import */ var _item__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./item */ \"./src/item.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"Item\", function() { return _item__WEBPACK_IMPORTED_MODULE_16__[\"default\"]; });\n\n/* harmony import */ var _input_input__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./input/input */ \"./src/input/input.js\");\n/* harmony reexport (module object) */ __webpack_require__.d(__webpack_exports__, \"INPUT\", function() { return _input_input__WEBPACK_IMPORTED_MODULE_17__; });\n/* harmony import */ var _gui_gui__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./gui/gui */ \"./src/gui/gui.js\");\n/* harmony reexport (module object) */ __webpack_require__.d(__webpack_exports__, \"GUI\", function() { return _gui_gui__WEBPACK_IMPORTED_MODULE_18__; });\n/* harmony import */ var _math_math__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./math/math */ \"./src/math/math.js\");\n/* harmony reexport (module object) */ __webpack_require__.d(__webpack_exports__, \"MATH\", function() { return _math_math__WEBPACK_IMPORTED_MODULE_19__; });\n/* harmony import */ var _engine__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./engine */ \"./src/engine.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"engine\", function() { return _engine__WEBPACK_IMPORTED_MODULE_20__[\"default\"]; });\n\n/* harmony import */ var _init__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ./init */ \"./src/init.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"init\", function() { return _init__WEBPACK_IMPORTED_MODULE_21__[\"default\"]; });\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n // import * as Font from '../lib/font.js/Font';\n\n\n\n\n\n\n\n\n//# sourceURL=webpack://okinawa/./src/okinawa.js?");

/***/ }),

/***/ "./src/options.js":
/*!************************!*\
  !*** ./src/options.js ***!
  \************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return Options; });\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar Options =\n/*#__PURE__*/\nfunction () {\n  function Options() {\n    _classCallCheck(this, Options);\n\n    // Use requestAnimationFrame instead of SetTimeOut in the main game loop\n    this.useAnimationFrame = false; // Draw smooth particles instead of pixel rectangles\n\n    this.useSmoothParticles = false; // drawHelpers:\n\n    this.drawBoundingBoxes = false;\n    this.drawMaxRadius = false;\n    this.drawCollisionRadius = false;\n    this.drawOrigins = false;\n    this.drawCenters = false;\n    this.drawTrackers = false;\n    this.drawDirectionVectors = false; // screenInfos\n\n    this.showFps = false; // frames per second\n\n    this.showStatistics = false; // num items, particles, effects, etc\n\n    this.showResizeMessage = true; // show an announcement when resize happens\n    // Console inform\n\n    this.outputPressedKeys = false;\n    this.outputPressedCombos = false;\n    this.outputClicks = false; // Show LogHandler info in the navigator console\n\n    this.debugInConsole = false; // Redirect console info to a html element\n    // Useful for mobile debug\n\n    this.debugInHtml = false;\n    this.debugFunctionNames = false;\n    this.allowPause = true; // allow pausing the game pressing the P key\n\n    this.allowHalt = false; // allow halting the engine pressing the escape key\n\n    this.allowFForFps = true; // allow pressing F to show FPS on screen\n\n    this.pauseOnWindowChange = false;\n    this.avoidLeavingPage = false;\n    this.preventDefaultKeyStrokes = true; // Show the language screen?\n\n    this.useLanguageScreen = false;\n    this.defaultLanguage = 'english'; // prepend this url to the url/path of the assets in the preloader\n    // only used if != null\n    // should start with the protocol, i.e. 'http://whatever.com/assets/'\n    // if null, window.location will be used\n\n    this.assetsURLPrefix = null;\n  }\n\n  _createClass(Options, [{\n    key: \"addOptions\",\n    value: function addOptions(opts) {\n      // Merge engine options and local game options in a single object\n      for (var attr in opts) {\n        this[attr] = opts[attr];\n      }\n    }\n  }]);\n\n  return Options;\n}();\n\n\n\n//# sourceURL=webpack://okinawa/./src/options.js?");

/***/ }),

/***/ "./src/player.js":
/*!***********************!*\
  !*** ./src/player.js ***!
  \***********************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return Player; });\n/* harmony import */ var _engine__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./engine */ \"./src/engine.js\");\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n\n\nvar Player =\n/*#__PURE__*/\nfunction () {\n  function Player() {\n    _classCallCheck(this, Player);\n\n    _engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].logs.log('Player::initialize', 'Initializing player object');\n    this.avatar = null;\n  }\n\n  _createClass(Player, [{\n    key: \"getAvatar\",\n    value: function getAvatar() {\n      return this.avatar;\n    }\n  }, {\n    key: \"setAvatar\",\n    value: function setAvatar(item) {\n      this.avatar = item;\n    }\n  }, {\n    key: \"initialize\",\n    value: function initialize() {}\n  }, {\n    key: \"activate\",\n    value: function activate() {}\n  }, {\n    key: \"step\",\n    value: function step() {}\n  }, {\n    key: \"draw\",\n    value: function draw() {\n      // This object is not drawn, its avatar should be\n      // added as an attached item inside any screen\n      return;\n    }\n  }]);\n\n  return Player;\n}();\n\n\n\n//# sourceURL=webpack://okinawa/./src/player.js?");

/***/ }),

/***/ "./src/scenes/background.js":
/*!**********************************!*\
  !*** ./src/scenes/background.js ***!
  \**********************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return Background; });\n/* harmony import */ var _engine__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../engine */ \"./src/engine.js\");\n/* harmony import */ var _item__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../item */ \"./src/item.js\");\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _get(target, property, receiver) { if (typeof Reflect !== \"undefined\" && Reflect.get) { _get = Reflect.get; } else { _get = function _get(target, property, receiver) { var base = _superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return _get(target, property, receiver || target); }\n\nfunction _superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = _getPrototypeOf(object); if (object === null) break; } return object; }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\n\n\n\nvar Background =\n/*#__PURE__*/\nfunction (_Item) {\n  _inherits(Background, _Item);\n\n  function Background() {\n    var _this;\n\n    _classCallCheck(this, Background);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Background).call(this));\n    _this.backgroundType = 'image'; // { color, image }\n\n    _this.color = 'black';\n    _this.spriteName = null;\n    _this.position.x = _engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].core.size.x / 2;\n    _this.position.y = _engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].core.size.y / 2;\n    _this.pauseScroll = false;\n    _this.verticalScroll = false;\n    _this.verticalOffset = 0;\n    _this.verticalSpeed = 0;\n    _this.horizontalScroll = false;\n    _this.horizontalOffset = 0;\n    _this.horizontalSpeed = 0;\n    return _this;\n  }\n\n  _createClass(Background, [{\n    key: \"initialize\",\n    value: function initialize() {\n      _get(_getPrototypeOf(Background.prototype), \"initialize\", this).call(this);\n    }\n  }, {\n    key: \"activate\",\n    value: function activate() {\n      _get(_getPrototypeOf(Background.prototype), \"activate\", this).call(this);\n\n      this.verticalOffset = 0;\n      this.horizontalOffset = 0;\n    }\n  }, {\n    key: \"step\",\n    value: function step(dt) {\n      _get(_getPrototypeOf(Background.prototype), \"step\", this).call(this, dt); // Not necessary if there are no animations, but here it is\n      // if (this.spriteName != null)\n      //   engine.sprites.step(dt, this);\n\n\n      if (this.pauseScroll === false) {\n        // Calculate the offset if we have scroll\n        // Note: vertical OR horizontal scroll, NOT both\n        if (this.verticalScroll === true) {\n          this.verticalOffset += this.verticalSpeed * dt / _engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].core.TIME_PER_FRAME;\n          this.verticalOffset = Math.floor(this.verticalOffset % _engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].core.size.y);\n        } else if (this.horizontalScroll === true) {\n          this.horizontalOffset += this.horizontalSpeed * dt / _engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].core.TIME_PER_FRAME;\n          this.horizontalOffset = Math.floor(this.horizontalOffset % _engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].core.size.x);\n        }\n      }\n    }\n  }, {\n    key: \"draw\",\n    value: function draw(ctx) {\n      if (this.backgroundType == 'color') {\n        ctx.fillStyle = this.color;\n        ctx.fillRect(0, 0, _engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].core.size.x, _engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].core.size.y);\n      } else if (this.backgroundType == 'image') {\n        var intOffset;\n        var remaining;\n\n        if (this.verticalScroll === true) {\n          intOffset = Math.floor(this.verticalOffset);\n          remaining = _engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].core.size.y - intOffset; // Draw the top half of the background\n\n          if (intOffset > 0) {\n            ctx.drawImage(_engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].sprites.getImage(this.spriteName), 0, remaining, _engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].core.size.x, intOffset, 0, 0, _engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].core.size.x, intOffset);\n          } // Draw the bottom half of the background\n\n\n          if (remaining > 0) {\n            ctx.drawImage(_engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].sprites.getImage(this.spriteName), 0, 0, _engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].core.size.x, remaining, 0, intOffset, _engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].core.size.x, remaining);\n          }\n        } else if (this.horizontalScroll === true) {\n          intOffset = Math.floor(this.horizontalOffset);\n          remaining = _engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].core.size.x - intOffset; // Draw the right half of the background (left side of the image)\n\n          if (intOffset > 0) {\n            ctx.drawImage(_engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].sprites.getImage(this.spriteName), 0, 0, intOffset, _engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].core.size.y, remaining, 0, intOffset, _engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].core.size.y);\n          } // Draw the left half of the background (right side of the image)\n\n\n          if (remaining > 0) {\n            ctx.drawImage(_engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].sprites.getImage(this.spriteName), intOffset, 0, remaining, _engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].core.size.y, 0, 0, remaining, _engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].core.size.y);\n          }\n        } else {\n          // ctx, object\n          // draw itself without using the parent draw function (Item.draw)\n          _engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].sprites.draw(ctx, this);\n        } // super.draw(ctx);\n\n      }\n    }\n  }]);\n\n  return Background;\n}(_item__WEBPACK_IMPORTED_MODULE_1__[\"default\"]);\n\n\n\n//# sourceURL=webpack://okinawa/./src/scenes/background.js?");

/***/ }),

/***/ "./src/scenes/preloader.js":
/*!*********************************!*\
  !*** ./src/scenes/preloader.js ***!
  \*********************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return Preloader; });\n/* harmony import */ var _engine__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../engine */ \"./src/engine.js\");\n/* harmony import */ var _scene__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./scene */ \"./src/scenes/scene.js\");\n/* harmony import */ var _gui_gui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../gui/gui */ \"./src/gui/gui.js\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils */ \"./src/utils.js\");\n/* harmony import */ var _lib_font_js_Font__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../lib/font.js/Font */ \"./lib/font.js/Font.js\");\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _get(target, property, receiver) { if (typeof Reflect !== \"undefined\" && Reflect.get) { _get = Reflect.get; } else { _get = function _get(target, property, receiver) { var base = _superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return _get(target, property, receiver || target); }\n\nfunction _superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = _getPrototypeOf(object); if (object === null) break; } return object; }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\n\n\n\n\n\n\nvar Preloader =\n/*#__PURE__*/\nfunction (_Scene) {\n  _inherits(Preloader, _Scene);\n\n  function Preloader() {\n    var _this;\n\n    _classCallCheck(this, Preloader);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Preloader).call(this));\n    _this.timeStarted = 0; // timestamp when activate() was called\n\n    _this.percentageLoaded = 0; // Percentage of files loaded\n\n    _this.incremental = 0; // current loader step in the incrementalLoader function\n\n    _this.imageAssets = []; // Assets to load\n\n    _this.totalImages = 0; // Number of different images to be loaded\n\n    _this.soundAssets = [];\n    _this.totalFonts = 0; // Number of fonts to be loaded\n\n    _this.message = null;\n    return _this;\n  }\n\n  _createClass(Preloader, [{\n    key: \"initialize\",\n    value: function initialize() {\n      _get(_getPrototypeOf(Preloader.prototype), \"initialize\", this).call(this);\n    }\n  }, {\n    key: \"activate\",\n    value: function activate() {\n      _engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].logs.log('Preloader::activate', 'Loading assets');\n\n      _get(_getPrototypeOf(Preloader.prototype), \"activate\", this).call(this);\n\n      this.timeStarted = new Date().getTime();\n      var i, len, what;\n\n      for (i = 0, len = this.imageAssets.length; i < len; i++) {\n        what = this.imageAssets[i];\n        this.addImageToLoad(what);\n      }\n\n      for (i = 0, len = this.soundAssets.length; i < len; i++) {\n        what = this.soundAssets[i];\n        this.addSoundToLoad(what);\n      }\n\n      this.message = new _gui_gui__WEBPACK_IMPORTED_MODULE_2__[\"GuiText\"](_engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].localization.get('loaded') + ' ' + this.percentageLoaded + '%', 300, 30);\n      this.message.setPosition(_engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].core.size.x / 2, _engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].core.size.y / 2 + 100);\n      this.message.setAlign(_gui_gui__WEBPACK_IMPORTED_MODULE_2__[\"ALIGN\"].CENTER);\n      this.message.setVerticalOffset(20); // this.message.setFontSize(20);\n\n      this.message.setFontColor('#FF2222');\n      this.gui.attachItem(this.message, 'msg_loading');\n    }\n  }, {\n    key: \"addAnimation\",\n    value: function addAnimation(data) {\n      this.imageAssets.push(data);\n    }\n  }, {\n    key: \"addSprite\",\n    value: function addSprite(data) {\n      // Add information for a complete animation spritesheet, with only\n      // one image\n      data.xStart = 0;\n      data.yStart = 0;\n      data.frames = 1;\n      data.initFrame = 0;\n      data.speed = 0;\n      this.addAnimation(data);\n    }\n  }, {\n    key: \"addImageToLoad\",\n    value: function addImageToLoad(data) {\n      var image = null; // Load only new images\n\n      if (!_engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].sprites.imageExists(data.path)) {\n        image = new Image();\n        Object(_utils__WEBPACK_IMPORTED_MODULE_3__[\"addEvent\"])('load', image, function () {\n          _engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].preloader.incrementalLoader();\n        }); // src always have to be set after adding the event listener, due to bug in IE8\n\n        if (_engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].options.assetsURLPrefix !== null) {\n          image.src = _engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].options.assetsURLPrefix + data.path;\n        } else {\n          image.src = Object(_utils__WEBPACK_IMPORTED_MODULE_3__[\"getProtocolAndHost\"])() + data.path;\n        }\n\n        this.totalImages++;\n        _engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].sprites.addImage(data.path, image);\n      } // Save only new sprites\n\n\n      if (!_engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].sprites.spriteExists(data.name)) {\n        _engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].sprites.addSprite(data.name, data.path, data.xStart, data.yStart, data.width, data.height, data.frames, data.initFrame, data.speed);\n      }\n    }\n  }, {\n    key: \"addSound\",\n    value: function addSound(data) {\n      this.soundAssets.push(data);\n    }\n  }, {\n    key: \"addSoundToLoad\",\n    value: function addSoundToLoad(data) {\n      var sound = null; // Load only new images\n\n      if (!_engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].sounds.soundExists(data.path)) {\n        var path = data.path;\n\n        if (_engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].options.assetsURLPrefix !== null) {\n          path = _engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].options.assetsURLPrefix + path;\n        } else {\n          path = Object(_utils__WEBPACK_IMPORTED_MODULE_3__[\"getProtocolAndHost\"])() + path;\n        }\n\n        sound = new Audio(path); // sound.src = data.path;\n\n        sound.load();\n        Object(_utils__WEBPACK_IMPORTED_MODULE_3__[\"addEvent\"])('canplaythrough', sound, function () {\n          _engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].preloader.incrementalLoader('sound');\n        });\n        _engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].sounds.addSound(data.name, data.path, sound);\n      }\n    }\n  }, {\n    key: \"addFont\",\n    value: function addFont(data) {\n      // load a font asynchonously using the Font.js library\n      var font = new _lib_font_js_Font__WEBPACK_IMPORTED_MODULE_4__[\"default\"]();\n      this.totalFonts++;\n\n      font.onerror = function (err) {\n        _engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].logs.log('Preloader::addFont', 'Error loading a font: ' + err);\n      };\n\n      font.onload = function () {\n        _engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].logs.log('Preloader::addFont', 'Font loaded <' + font.fontFamily + '>');\n        _engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].preloader.incrementalLoader('font');\n      };\n\n      font.fontFamily = data.name;\n\n      if (typeof data.flag != 'undefined') {\n        font.src = data.path;\n      } else {\n        if (_engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].options.assetsURLPrefix !== null) {\n          font.src = _engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].options.assetsURLPrefix + data.path;\n        } else {\n          font.src = Object(_utils__WEBPACK_IMPORTED_MODULE_3__[\"getProtocolAndHost\"])() + data.path;\n        }\n      }\n\n      _engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].fonts.addFont(data.name, data.path, font);\n    }\n  }, {\n    key: \"incrementalLoader\",\n    value: function incrementalLoader() {\n      var total = this.totalImages + this.soundAssets.length + this.totalFonts;\n      this.incremental += 1;\n      this.percentageLoaded = Math.floor(this.incremental * 100 / total);\n    }\n  }, {\n    key: \"draw\",\n    value: function draw(ctx) {\n      _get(_getPrototypeOf(Preloader.prototype), \"draw\", this).call(this, ctx); // Loading bar\n\n\n      var barWidth = _engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].core.size.x / 3;\n      ctx.fillStyle = '#FF2222';\n      ctx.fillRect((_engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].core.size.x - barWidth) / 2 + 1, _engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].core.size.y / 2 + 51, this.percentageLoaded * barWidth / 100, 15);\n      ctx.lineWidth = 2;\n      ctx.strokeStyle = '#FFEEEE';\n      ctx.strokeRect((_engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].core.size.x - barWidth) / 2, _engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].core.size.y / 2 + 50, barWidth + 2, 16);\n    }\n  }, {\n    key: \"step\",\n    value: function step(dt) {\n      _get(_getPrototypeOf(Preloader.prototype), \"step\", this).call(this, dt);\n\n      this.message.setText(_engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].localization.get('loaded') + ' ' + this.percentageLoaded + '%');\n      var timeLived = new Date().getTime() - this.timeStarted; // At least one second to load resources\n\n      if (this.percentageLoaded >= 100 && timeLived > 1000) {\n        _engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].core.activate();\n        _engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].external('LOADED', null, null);\n      }\n    }\n  }]);\n\n  return Preloader;\n}(_scene__WEBPACK_IMPORTED_MODULE_1__[\"default\"]);\n\n\n\n//# sourceURL=webpack://okinawa/./src/scenes/preloader.js?");

/***/ }),

/***/ "./src/scenes/scene.js":
/*!*****************************!*\
  !*** ./src/scenes/scene.js ***!
  \*****************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return Scene; });\n/* harmony import */ var _engine__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../engine */ \"./src/engine.js\");\n/* harmony import */ var _item__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../item */ \"./src/item.js\");\n/* harmony import */ var _gui_gui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../gui/gui */ \"./src/gui/gui.js\");\n/* harmony import */ var _clocks_unaligned__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../clocks/unaligned */ \"./src/clocks/unaligned.js\");\n/* harmony import */ var _input_input__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../input/input */ \"./src/input/input.js\");\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _get(target, property, receiver) { if (typeof Reflect !== \"undefined\" && Reflect.get) { _get = Reflect.get; } else { _get = function _get(target, property, receiver) { var base = _superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return _get(target, property, receiver || target); }\n\nfunction _superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = _getPrototypeOf(object); if (object === null) break; } return object; }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\n\n\n\n\n\n\nvar Scene =\n/*#__PURE__*/\nfunction (_Item) {\n  _inherits(Scene, _Item);\n\n  function Scene() {\n    var _this;\n\n    _classCallCheck(this, Scene);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Scene).call(this));\n    _this.playable = false; // This screen is playable\n\n    _this.backgrounds = [];\n    _this.isCurrent = false; // Is the screen being used now\n\n    _this.gui = new _gui_gui__WEBPACK_IMPORTED_MODULE_2__[\"GuiElement\"](_assertThisInitialized(_this)); // Different Gui for each scene\n\n    _this.clock = new _clocks_unaligned__WEBPACK_IMPORTED_MODULE_3__[\"default\"]();\n    _this.input = new _input_input__WEBPACK_IMPORTED_MODULE_4__[\"SceneInput\"]();\n    return _this;\n  }\n\n  _createClass(Scene, [{\n    key: \"initialize\",\n    value: function initialize() {\n      _get(_getPrototypeOf(Scene.prototype), \"initialize\", this).call(this);\n\n      this.gui.initialize();\n      this.clock.initialize();\n      this.input.initialize();\n    }\n  }, {\n    key: \"activate\",\n    value: function activate() {\n      _get(_getPrototypeOf(Scene.prototype), \"activate\", this).call(this);\n\n      this.gui.activate();\n      this.clock.activate();\n      this.input.activate();\n\n      for (var i = 0, len = this.backgrounds.length; i < len; i++) {\n        this.backgrounds[i].activate();\n      }\n    }\n  }, {\n    key: \"draw\",\n    value: function draw(ctx) {\n      // Test for safety: clean the full scene\n      // If everything is well coded in the game, in theory this could be removed\n      ctx.clearRect(0, 0, _engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].core.size.x, _engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].core.size.y);\n\n      for (var i = 0, len = this.backgrounds.length; i < len; i++) {\n        this.backgrounds[i].draw(ctx);\n      }\n\n      _get(_getPrototypeOf(Scene.prototype), \"draw\", this).call(this, ctx);\n\n      this.gui.draw(ctx);\n    }\n  }, {\n    key: \"step\",\n    value: function step(dt) {\n      for (var i = 0, len = this.backgrounds.length; i < len; i++) {\n        this.backgrounds[i].step(dt);\n      }\n\n      this.clock.step(dt);\n\n      _get(_getPrototypeOf(Scene.prototype), \"step\", this).call(this, dt);\n\n      this.gui.step(dt);\n    }\n  }, {\n    key: \"addBackground\",\n    value: function addBackground(background) {\n      this.backgrounds.push(background);\n    }\n  }]);\n\n  return Scene;\n}(_item__WEBPACK_IMPORTED_MODULE_1__[\"default\"]);\n\n\n\n//# sourceURL=webpack://okinawa/./src/scenes/scene.js?");

/***/ }),

/***/ "./src/scenes/scenes.js":
/*!******************************!*\
  !*** ./src/scenes/scenes.js ***!
  \******************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return Scenes; });\n/* harmony import */ var _engine__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../engine */ \"./src/engine.js\");\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n\n\nvar Scenes =\n/*#__PURE__*/\nfunction () {\n  function Scenes() {\n    _classCallCheck(this, Scenes);\n\n    this.collection = null; // Array in the form scenes[i] = { 'scene': scene, 'name': name }\n\n    this.currentSceneIndex = null;\n    this.currentSceneName = null;\n    this.currentScene = null;\n  }\n\n  _createClass(Scenes, [{\n    key: \"initialize\",\n    value: function initialize() {\n      this.collection = [];\n      this.currentSceneIndex = 0;\n      this.currentSceneName = '';\n      this.currentScene = null;\n    }\n  }, {\n    key: \"activate\",\n    value: function activate() {}\n  }, {\n    key: \"draw\",\n    value: function draw() {}\n  }, {\n    key: \"step\",\n    value: function step() {}\n  }, {\n    key: \"getCurrentScene\",\n    value: function getCurrentScene() {\n      return this.currentScene;\n    }\n  }, {\n    key: \"setScene\",\n    value: function setScene(num) {\n      // Old scene\n      // let oldScene = this.currentScene;\n      if (typeof this.currentScene !== 'undefined' && this.currentScene !== null) {\n        this.currentScene.isCurrent = false;\n      }\n\n      _engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].core.clearScreen(); // New scene\n\n      this.currentSceneIndex = num;\n      this.currentSceneName = _engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].scenes.collection[num].name;\n      this.currentScene = _engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].scenes.collection[num].scene;\n      this.currentScene.isCurrent = true;\n      this.currentScene.activate();\n\n      if (typeof _engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].player !== 'undefined' && _engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].player !== null) {\n        _engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].player.activate();\n      }\n\n      _engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].logs.log('Scenes::setScene', 'Set Scene: ' + this.currentSceneName + ' (' + this.currentSceneIndex + ')');\n      _engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].external('SCENE_CHANGE', null, null);\n    }\n  }, {\n    key: \"addScene\",\n    value: function addScene(scene, name) {\n      _engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].logs.log('Scenes::addScene', 'Add Scene: ' + name);\n      scene.isCurrent = false;\n      this.collection.push({\n        scene: scene,\n        name: name\n      });\n    }\n  }, {\n    key: \"insertScene\",\n    value: function insertScene(scene, name, num) {\n      scene.isCurrent = false;\n      this.collection.splice(num, 0, {\n        scene: scene,\n        name: name\n      });\n    } // do not use 'this', as this function could be called out\n\n  }, {\n    key: \"advanceScene\",\n    value: function advanceScene() {\n      // Not able to advance scene\n      if (_engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].scenes.currentSceneIndex + 1 >= _engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].scenes.collection.length) {\n        return;\n      } // engine.logs.log('Scenes::advanceScene', 'Advance Level', this.currentSceneIndex + 1);\n\n\n      _engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].scenes.setScene(_engine__WEBPACK_IMPORTED_MODULE_0__[\"default\"].scenes.currentSceneIndex + 1);\n    }\n  }, {\n    key: \"goBackScene\",\n    value: function goBackScene() {\n      // Not able to go back\n      if (this.currentSceneIndex - 1 < 0) {\n        return;\n      } // engine.logs.log('Scenes::advanceScene', 'Advance Level', this.currentSceneIndex + 1);\n\n\n      this.setScene(this.currentSceneIndex - 1);\n    }\n  }]);\n\n  return Scenes;\n}();\n\n\n\n//# sourceURL=webpack://okinawa/./src/scenes/scenes.js?");

/***/ }),

/***/ "./src/utils.js":
/*!**********************!*\
  !*** ./src/utils.js ***!
  \**********************/
/*! exports provided: addEvent, getProtocolAndHost, detectIE */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"addEvent\", function() { return addEvent; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"getProtocolAndHost\", function() { return getProtocolAndHost; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"detectIE\", function() { return detectIE; });\n// Global addEvent to fix old IE way of attaching events\nfunction addEvent(evnt, elem, func) {\n  if (elem.addEventListener) {\n    // W3C DOM\n    elem.addEventListener(evnt, func, false);\n  } else if (elem.attachEvent) {\n    // IE DOM\n    elem.attachEvent('on' + evnt, func);\n  } // If we want to expose the currentTarget (non-existent in older IE)\n  // elem.attachEvent('on' + evnt, function(a) { a.currentTarget = elem; func(a); });\n  // Not much to do\n  else {\n      elem['on' + evnt] = func;\n    }\n} // get protocol and hostname\n\nfunction getProtocolAndHost() {\n  var result = '';\n\n  if (window.location.href) {\n    return window.location.href;\n  }\n\n  if (window.location.protocol != 'file:') {\n    result += window.location.protocol + '//';\n  }\n\n  if (window.location.host !== '') {\n    result += window.location.host + '/';\n  }\n\n  return result;\n}\n/*\n// Polyfill for the Array.isArray function\nArray.isArray ||\n  (Array.isArray = function(a) {\n    return '' + a !== a && {}.toString.call(a) == '[object Array]';\n  });\n\n// Polyfill for the Object.create function\nObject.create ||\n  (Object.create = function(o) {\n    if (arguments.length > 1) {\n      throw new Error(\n        'Object.create implementation only accepts the first parameter.'\n      );\n    }\n    function F() {}\n    F.prototype = o;\n    return new F();\n  });\n\n// Polyfill for the JS Object.keys function.\n// From https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/keys\nif (!Object.keys) {\n  Object.keys = (function() {\n    'use strict';\n    let hasOwnProperty = Object.prototype.hasOwnProperty,\n      hasDontEnumBug = !{ toString: null }.propertyIsEnumerable('toString'),\n      dontEnums = [\n        'toString',\n        'toLocaleString',\n        'valueOf',\n        'hasOwnProperty',\n        'isPrototypeOf',\n        'propertyIsEnumerable',\n        'constructor'\n      ],\n      dontEnumsLength = dontEnums.length;\n\n    return function(obj) {\n      if (\n        typeof obj !== 'object' &&\n        (typeof obj !== 'function' || obj === null)\n      ) {\n        throw new TypeError('Object.keys called on non-object');\n      }\n\n      let result = [],\n        prop,\n        i;\n\n      for (prop in obj) {\n        if (hasOwnProperty.call(obj, prop)) {\n          result.push(prop);\n        }\n      }\n\n      if (hasDontEnumBug) {\n        for (i = 0; i < dontEnumsLength; i++) {\n          if (hasOwnProperty.call(obj, dontEnums[i])) {\n            result.push(dontEnums[i]);\n          }\n        }\n      }\n      return result;\n    };\n  })();\n}\n*/\n\nfunction detectIE() {\n  var userAgent = navigator.userAgent.toLowerCase();\n\n  if (/msie/.test(userAgent)) {\n    return parseFloat((userAgent.match(/.*(?:rv|ie)[/: ](.+?)([ );]|$)/) || [])[1]);\n  }\n\n  if (navigator.appVersion.indexOf('Trident/') > 0) {\n    return 11;\n  }\n\n  return -1;\n}\n\n//# sourceURL=webpack://okinawa/./src/utils.js?");

/***/ })

/******/ });
});